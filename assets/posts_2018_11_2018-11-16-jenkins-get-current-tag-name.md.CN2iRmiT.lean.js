import{_ as i,a,af as t,o as e}from"./chunks/framework.C87LdZyP.js";const o=JSON.parse('{"title":"Jenkins get current tag name","description":"","frontmatter":{"title":"Jenkins get current tag name","date":"2018-11-16T00:00:00.000Z","tags":["git","jenkins","ci"]},"headers":[],"relativePath":"posts/2018/11/2018-11-16-jenkins-get-current-tag-name.md","filePath":"posts/2018/11/2018-11-16-jenkins-get-current-tag-name.md","lastUpdated":1718173059000}'),n={name:"posts/2018/11/2018-11-16-jenkins-get-current-tag-name.md"};function h(l,s,p,k,r,d){return e(),a("div",null,s[0]||(s[0]=[t(`<p>前提是 HEAD is tagged</p><h2 id="for-jenkins-pipline" tabindex="-1">for jenkins pipline: <a class="header-anchor" href="#for-jenkins-pipline" aria-label="Permalink to &quot;for jenkins pipline:&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># sh(returnStdout: true, script: &quot;git tag --sort version:refname | tail -1&quot;).trim()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">def</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> foo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sh</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">returnStdout:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> true</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> script:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;git tag --sort version:refname | tail -1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.trim</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span></code></pre></div><div class="language-groovy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">groovy</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">sh </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;git tag --sort version:refname | tail -1 &gt; version.tmp&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#F69D50;"> tag </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#F69D50;"> readFile </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;version.tmp&#39;</span></span></code></pre></div><h2 id="for-shell" tabindex="-1">for shell <a class="header-anchor" href="#for-shell" aria-label="Permalink to &quot;for shell&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">sh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> tag </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">--sort</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> version:refname </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> tail</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">\`</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> describe</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --tags</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --long</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --dirty</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --always</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># yields the tag name name if and only if HEAD is tagged</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> tag</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --contains</span></span></code></pre></div>`,8)]))}const F=i(n,[["render",h]]);export{o as __pageData,F as default};
