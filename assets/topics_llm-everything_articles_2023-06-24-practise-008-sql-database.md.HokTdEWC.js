import{_ as h,a as n,af as k,o as l}from"./chunks/framework.C87LdZyP.js";const i="/assets/300516172258458.tPaoeMMk.png",t="/assets/2099633380409125.DVYClNKJ.png",p="/assets/2098093049467833.C-f6FHz2.png",a="/assets/2029738968000875.qsFAI3-2.png",e="/assets/2096667203228000.ViYNHHwh.png",r="/assets/2100517678641458.CSCOl8GK.png",C="/assets/2100397554252666.BRvPVY9Y.png",d="/assets/2100382940060875.CYblT6Br.png",F="/assets/2109021927355250.DcyheMzV.png",g="/assets/2109108225793291.BHvr5O3e.png",y="/assets/2105681383633083.Icoc4BJx.png",A="/assets/2106333670124458.ChJjnuTE.png",b=JSON.parse('{"title":"《万物皆可LLM》008：一次不愉快的 LangChain 数据库问答和可视化分析实践","description":"","frontmatter":{"title":"《万物皆可LLM》008：一次不愉快的 LangChain 数据库问答和可视化分析实践","date":"2023-06-24T00:00:00.000Z","tags":["ai","ml"],"category":["AI","llm-everything"]},"headers":[],"relativePath":"topics/llm-everything/articles/2023-06-24-practise-008-sql-database.md","filePath":"topics/llm-everything/articles/2023-06-24-practise-008-sql-database.md","lastUpdated":1718187682000}'),D={name:"topics/llm-everything/articles/2023-06-24-practise-008-sql-database.md"};function B(E,s,o,c,m,u){return l(),n("div",null,s[0]||(s[0]=[k('<blockquote><p><strong>数据问答</strong>和<strong>可视化分析</strong>肯定是企业管理应用的日常，今天带大家看怎么实现这个功能。</p></blockquote><p>先看先最终效果吧：</p><p><img src="'+i+'" alt=""></p><h2 id="关于标题的不愉快" tabindex="-1">关于标题的不愉快 <a class="header-anchor" href="#关于标题的不愉快" aria-label="Permalink to &quot;关于标题的不愉快&quot;">​</a></h2><p>首先呢，我确实使用 LangChain 的 SqlAgent 实现了数据问答和可视化分析。</p><p>其次呢，LangChain 的逻辑和内置提示模板不是那么好用，偶尔会死循环。Token 用的也是飞快，如果真的这样上线，执行一次分析可能要几毛钱的价格。</p><p>下面是我开发用的 OpenAI 账号的用量，平时写写代码用量都很少。</p><p><img src="'+t+'" alt=""></p><p>这两天写这篇文档的代码时候用了下 LangChain SqlAgent，流量（Token）使用飙升，虽然只有几美金，但是我这两天每天也只是调用了十几次而已（还没达到理想效果）。</p><p><img src="'+p+'" alt=""></p><h2 id="关于架构" tabindex="-1">关于架构 <a class="header-anchor" href="#关于架构" aria-label="Permalink to &quot;关于架构&quot;">​</a></h2><p>我之前以为的架构 SqlAgent 这块的是这样：</p><p><img src="'+a+'" alt=""></p><p>实际上他是这样，中间会有不停的试错纠错重试：</p><p><img src="'+e+'" alt=""></p><p>这也是我为什么之前<strong>建议过别人能不用就不用 LangChain</strong>，除了 <strong>Hello World</strong> 这样的 Demo 东西，后面 LangChain 还是有一些问题的。</p><blockquote><p>深入研究学习 LangChain 不如直接调用 OpenAI 来实现（重构）应用。</p></blockquote><p>废话不说，看看这个数据问答开发过程吧。</p><h2 id="需求" tabindex="-1">需求 <a class="header-anchor" href="#需求" aria-label="Permalink to &quot;需求&quot;">​</a></h2><p>有两个小的数据分析需求。</p><h3 id="分析邮件" tabindex="-1">分析邮件 <a class="header-anchor" href="#分析邮件" aria-label="Permalink to &quot;分析邮件&quot;">​</a></h3><p>第一个是咱们之前关于邮件的：</p><ul><li>统计下有谁给我发了邮件，</li><li>邮件的主题分类都是那些，比如</li></ul><p><img src="'+r+'" alt=""></p><h3 id="分析开发任务" tabindex="-1">分析开发任务 <a class="header-anchor" href="#分析开发任务" aria-label="Permalink to &quot;分析开发任务&quot;">​</a></h3><p>第二个是关于开发任务的，假设你是某个部门负责人、比如开发团队负责人，你是不是时不时的想看看团队的开发情况？</p><ul><li>这周有多少个开发任务，</li><li>有多少任务延期了了，多少任务准时完成了，</li><li>各个部门完成的任务情况，</li><li>任务的打分、耗时等分布。</li></ul><p>比如这样？</p><p><img src="'+C+'" alt=""></p><p>或者这样：</p><p><img src="'+d+'" alt=""></p><h2 id="langchain-的-sql-支持" tabindex="-1">LangChain 的 SQL 支持 <a class="header-anchor" href="#langchain-的-sql-支持" aria-label="Permalink to &quot;LangChain 的 SQL 支持&quot;">​</a></h2><p>首先，企业数据通常存储在 SQL 数据库中，如果要做数据分析，肯定离不开 SQL 和数据库。</p><p>LangChain 提供了 SqlChain 和 Agent 来实现<strong>基于自然语言</strong>提示构建和运行 SQL 查询。</p><p>底层实现是通过 SQLAlchemy 这个 ORM 库，SQLAlchemy 支持的主要 SQL 方言的兼容（例如 MySQL、PostgreSQL、Oracle SQL、Databricks、SQLite）。</p><p>基于这些能力，我们可以试下下面的应用：</p><ul><li>自然语言的数据库查询</li><li>根据数据库的数据回答问题聊天机器人</li><li>自然语言的数据分析，和构建自定义仪表板</li></ul><p><img src="'+a+`" alt="美好的状态是这样"></p><h2 id="实现" tabindex="-1">实现 <a class="header-anchor" href="#实现" aria-label="Permalink to &quot;实现&quot;">​</a></h2><h4 id="引入相关包" tabindex="-1">引入相关包 <a class="header-anchor" href="#引入相关包" aria-label="Permalink to &quot;引入相关包&quot;">​</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sys</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> langchain.agents </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> create_sql_agent, AgentType</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> langchain.agents.agent_toolkits </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> SQLDatabaseToolkit</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> langchain.chains </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> create_sql_query_chain</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> langchain.chat_models </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> ChatOpenAI</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> langchain.sql_database </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> SQLDatabase</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> langchain.llms.openai </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> OpenAI</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> langchain.agents </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AgentExecutor</span></span></code></pre></div><h4 id="创建数据库字段" tabindex="-1">创建数据库字段 <a class="header-anchor" href="#创建数据库字段" aria-label="Permalink to &quot;创建数据库字段&quot;">​</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># sqlite</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">db </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> SQLDatabase.from_uri(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;sqlite:////Users/.../emails.db&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># postgres</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">db </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> SQLDatabase.from_uri(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;postgresql://user:password@localhost:5432/postgres?connect_timeout=10&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span></code></pre></div><h4 id="创建-agent" tabindex="-1">创建 Agent <a class="header-anchor" href="#创建-agent" aria-label="Permalink to &quot;创建 Agent&quot;">​</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">llm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> OpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">temperature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">verbose</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">toolkit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> SQLDatabaseToolkit(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">db</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">db, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">OpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">temperature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">agent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> create_sql_agent(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">    llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">llm,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">    toolkit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">toolkit,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">    verbose</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">    agent_type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">AgentType.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ZERO_SHOT_REACT_DESCRIPTION</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span></code></pre></div><h4 id="描述表结构" tabindex="-1">描述表结构 <a class="header-anchor" href="#描述表结构" aria-label="Permalink to &quot;描述表结构&quot;">​</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> agent.run(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;描述下邮件表&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(response)</span></span></code></pre></div><p>我根据日志画了一下 LangChain 的执行过程（多次调用 LLM 的过程）：</p><p><img src="`+F+`" alt=""></p><p>下面是打印的详细输出，可以看到 LangChain 的整个思考过程。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Entering new AgentExecutor chain...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Action:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sql_db_list_tables</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Action</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Input:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Observation:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> emails</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Thought:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> should</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> query</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> schema</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> emails</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> table</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Action:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sql_db_schema</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Action</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Input:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> emails</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Observation:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">CREATE</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> TABLE</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> emails</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">	id</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> BIGINT,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">	from_email</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">	from_name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">	subject</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">	date_beijing</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> TIMESTAMP</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">WITHOUT</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> TIME</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ZONE,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">	text</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> TEXT</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">/*</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">3</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> rows</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> emails</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> table:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	from_email</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	from_name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	subject</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	date_beijing</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	text</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">8129</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	info@techtarget.com</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	ComputerWeekly.com</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	Inside</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Group-IB’s</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  playbook</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	2023-04-11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 19:39:57</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	None</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">8156</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	update@grafana.com</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	Grafana</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Labs</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Team</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	You&#39;re invited: Grafana Terraform Provider	2023-04-12 10:01:23	None</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">*/</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Thought: I now know the final answer</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Final Answer: The emails table contains the following columns: id, from_email, from_name, subject, date_beijing, and text.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&gt; Finished chain.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">The emails table contains the following columns: id, from_email, from_name, subject, date_beijing, and text.</span></span></code></pre></div><p>客户端的返回时：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">The</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> emails</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> table</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> contains</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> following</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> columns:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> id,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> from_email,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> from_name,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> subject,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> date_beijing,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> text.</span></span></code></pre></div><h4 id="查询邮件-用-markdown-展示" tabindex="-1">查询邮件，用 Markdown 展示 <a class="header-anchor" href="#查询邮件-用-markdown-展示" aria-label="Permalink to &quot;查询邮件，用 Markdown 展示&quot;">​</a></h4><p>提问如下：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">查看最近3个月有多少封的邮件。返回给我发送邮件最多的5个人，用</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Markdown</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 表格展示</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 姓名，邮件地址，总邮件数，最后发送时间，</span></span></code></pre></div><p>LangChain 执行过程如下，依然看图：</p><p><img src="`+g+`" alt=""></p><p>看下完整的输出：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Entering new AgentExecutor chain...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Action:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sql_db_list_tables</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Action</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Input:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Observation:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> emails,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> tasks</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Thought:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> should</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> query</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> schema</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> emails</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> table</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Action:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sql_db_schema</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Action</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Input:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> emails</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Observation:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">CREATE</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> TABLE</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> emails</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">	id</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> BIGINT,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">	from_email</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">	from_name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">	subject</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">	date_beijing</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> TIMESTAMP</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">WITHOUT</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> TIME</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ZONE,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">	text</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> TEXT</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">/*</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">3</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> rows</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> emails</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> table:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	from_email</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	from_name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	subject</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	date_beijing</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	text</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">8129</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	info@zmp.techtarget.com</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	ComputerWeekly.com</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	Inside</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Group-IB’s</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> cyber</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> security</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> playbook</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	2023-04-11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 19:39:57</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	None</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">8156</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	update@grafana.com</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	Grafana</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Labs</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Team</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	You&#39;re invited: Mastering the Grafana Terraform Provider	2023-04-12 10:01:23	None</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">*/</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Thought: I should query the emails table to get the data I need</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Action: sql_db_query</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Action Input: SELECT from_name, from_email, COUNT(*) as total_emails, MAX(date_beijing) as last_sent_date FROM emails WHERE date_beijing &gt; NOW() - INTERVAL &#39;3</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> MONTHS&#39; GROUP BY from_name, from_email ORDER BY total_emails DESC LIMIT 5</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Observation: [(&#39;ComputerWeekly.com&#39;, &#39;info@zmp.techtarget.com&#39;, 20, datetime.datetime(2023, 8, 17, 18, 31, 50)), (&#39;Grafana</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Labs&#39;, &#39;cloud-success@grafana.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Thought:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> now</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> know</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> final</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> answer</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Final</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Answer:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 姓名</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 邮件地址</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 总邮件数</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 最后发送时间</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ---</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ---</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ---</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ---</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ComputerWeekly.com</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> info@techtarget.com</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 20</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 2023-08-17</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 18:31:50</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> Grafana</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Labs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> cloud@grafana.com</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 13</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 2023-08-22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 14:57:27</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> Google</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Cloud</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> googlecloud@google.com</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 9</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 2023-08-25</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 14:47:25</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> LeanIX</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Connect</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Summit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> summit@connect.com</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 8</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 2023-08-24</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 14:05:50</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> Grafana</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Labs</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Team</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> update@grafana.com</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 6</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 2023-07-11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 12:31:15</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> Finished</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chain.</span></span></code></pre></div><h4 id="谁给我发的邮件最多" tabindex="-1">谁给我发的邮件最多？ <a class="header-anchor" href="#谁给我发的邮件最多" aria-label="Permalink to &quot;谁给我发的邮件最多？&quot;">​</a></h4><p>上面其实还好，当我问下下面这个问题的时候， LangChain Agent 炸了！</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> agent.run(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;查看最近一个月的邮件。看谁给我发的邮件最多？&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(response)</span></span></code></pre></div><p>LangChain 会告诉你：<strong>Agent stopped due to iteration limit or time limit.</strong></p><p>没错这么简单的问题，他因为轮训次数太多超出限制停止尝试了，</p><p>输出大概是这样的：</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Entering new AgentExecutor chain</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action: sql_db_list_tables</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action Input: </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Observation: emails</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Thought: I should query the schema of the emails table</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">此处省略 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> 行</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Thought:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Finished chain.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Agent stopped due to iteration limit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">or</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> time limit.</span></span></code></pre></div><p>问题的原因无非就是生成的 SQL 错误等等，然后不停修复不停重试。</p><p>这跟 LLM 有关（GPT4可能会好很多，我用的 GPT3），同样的问题有时会成功，比如一次成功的：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Finished chain.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ComputerWeekly.com</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 发了最多的邮件，共发了</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 封。</span></span></code></pre></div><p>这个问题不纠结，我们继续（后面还会出现这种类似的死循环过程，我就不赘述了）。</p><h2 id="可视化" tabindex="-1">可视化 <a class="header-anchor" href="#可视化" aria-label="Permalink to &quot;可视化&quot;">​</a></h2><p>下面我们来解决可视化的问题，当然可视化也有两类方案：</p><ul><li>一个是后端 Python 生成图片返回前端， 比如 Matplotlib；</li><li>一个是返回 Json 数据给前端显示，比如 ECharts。</li></ul><p><img src="`+y+`" alt=""></p><p>我们尝试使用前端展示的方案，毕竟这样的交互性强一点。</p><h3 id="提示" tabindex="-1">提示 <a class="header-anchor" href="#提示" aria-label="Permalink to &quot;提示&quot;">​</a></h3><p>我们现在还是使用 LangChain，那么此处的关键就是编写 Prompt，能让 AI 做的都让 AI 做，比如：直接生成 ECharts 的配置。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;&#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">根据我的问题，执行数据查询，并选择合适的可视化方案（线图、饼图、柱状图等），生成 echarts 的配置，</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">问题：</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">数据为: </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">%s</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">请按照以下格式回复我：</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:::</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  &quot;charts&quot;:{&lt;echarts的配置&gt;}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:::</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;&#39;&#39;</span></span></code></pre></div><h3 id="可视化最近一周任务" tabindex="-1">可视化最近一周任务 <a class="header-anchor" href="#可视化最近一周任务" aria-label="Permalink to &quot;可视化最近一周任务&quot;">​</a></h3><p>提问：<strong>最近一周不同部门每天完成的任务数</strong></p><p>返回的配置：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;charts&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;option&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    &quot;title&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;text&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;最近一周不同部门每天完成的任务数&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    }</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">    ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>可视化效果如下：</p><p><img src="`+A+'" alt=""></p><p>集成到我们的前端里面：</p><p><img src="'+i+`" alt=""></p><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h2><p>上面是简单粗暴的 AI 数据应用实现，下一期以应用架构的四维，融合大语言模型的能力来实现一个可用的数据交互功能。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"></span></code></pre></div><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"></span></code></pre></div><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"></span></code></pre></div><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"></span></code></pre></div><h2 id="描述下邮件表" tabindex="-1">描述下邮件表 <a class="header-anchor" href="#描述下邮件表" aria-label="Permalink to &quot;描述下邮件表&quot;">​</a></h2><h2 id="总加油-markdown" tabindex="-1">总加油 markdown <a class="header-anchor" href="#总加油-markdown" aria-label="Permalink to &quot;总加油 markdown&quot;">​</a></h2><h2 id="描述下邮件表-1" tabindex="-1">描述下邮件表 <a class="header-anchor" href="#描述下邮件表-1" aria-label="Permalink to &quot;描述下邮件表&quot;">​</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> langchain.agents </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> create_sql_agent</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> langchain.agents.agent_toolkits </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> SQLDatabaseToolkit</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> langchain.sql_database </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> SQLDatabase</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> langchain.llms.openai </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> OpenAI</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> langchain.agents </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AgentExecutor</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">db </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> SQLDatabase.from_uri(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;sqlite:///./emails.db&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">toolkit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> SQLDatabaseToolkit(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">db</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">db, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">OpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">temperature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">agent_executor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> create_sql_agent(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">    llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">OpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">temperature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">    toolkit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">toolkit,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">    verbose</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">True</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> agent_executor.run(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;描述下邮件表&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(response)</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Entering new AgentExecutor chain...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Action:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sql_db_list_tables</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Action</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Input:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Observation:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> emails</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Thought:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> should</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> query</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> schema</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> emails</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> table</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Action:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sql_db_schema</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Action</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Input:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> emails</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Observation:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Error:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Invalid</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> isoformat</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> string:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;11 Apr 2023 11:39:57 -0000&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Thought:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> should</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> double</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> check</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> query</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> before</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> executing</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> it</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Action:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sql_db_query_checker</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Action</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Input:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> SELECT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> emails</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Observation:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">SELECT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> emails</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Thought:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> now</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> know</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> final</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> answer</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Final</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Answer:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> The</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> emails</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> table</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> contains</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> columns</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> id,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sender,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> recipient,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> subject,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> body,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> date_sent,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> date_received.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Finished chain.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">The</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> emails</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> table</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> contains</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> columns</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> id,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sender,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> recipient,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> subject,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> body,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> date_sent,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> date_received.</span></span></code></pre></div><h2 id="查看最近一个月的邮件。看谁给我发的邮件最多" tabindex="-1">查看最近一个月的邮件。看谁给我发的邮件最多 <a class="header-anchor" href="#查看最近一个月的邮件。看谁给我发的邮件最多" aria-label="Permalink to &quot;查看最近一个月的邮件。看谁给我发的邮件最多&quot;">​</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> agent_executor.run(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;查看最近一个月的邮件。看谁给我发的邮件最多？&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(response)</span></span></code></pre></div><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Entering new AgentExecutor chain</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action: sql_db_list_tables</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action Input: </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Observation: emails</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Thought: I should query the schema of the emails table</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action: sql_db_schema</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action Input: emails</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Observation: Error: Invalid isoformat string: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;11 Apr 2023 11:39:57 -0000&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Thought: I should check the query before executing it</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action: sql_db_query_checker</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action Input: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURDATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Observation: </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURDATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Thought: The query looks correct, I should execute it</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action: sql_db_query</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action Input: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURDATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Observation: Error: (sqlite3.OperationalError) near </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: syntax error</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SQL</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURDATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(Background on this error at: https:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">//</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">sqlalche.me</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">20</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">e3q8)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Thought: I should check the query before executing it</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action: sql_db_query_checker</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action Input: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURRENT_DATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Observation: </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURRENT_DATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Thought: The query looks correct, I should execute it</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action: sql_db_query</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action Input: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURRENT_DATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Observation: Error: (sqlite3.OperationalError) near </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;(&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: syntax error</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SQL</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURRENT_DATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(Background on this error at: https:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">//</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">sqlalche.me</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">20</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">e3q8)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Thought: I should check the query before executing it</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action: sql_db_query_checker</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action Input: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURRENT_DATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Observation: </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURRENT_DATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Thought: The query looks correct, I should execute it</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action: sql_db_query</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action Input: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURRENT_DATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Observation: Error: (sqlite3.OperationalError) near </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;(&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: syntax error</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SQL</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURRENT_DATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(Background on this error at: https:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">//</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">sqlalche.me</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">20</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">e3q8)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Thought: I should check the query before executing it</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action: sql_db_query_checker</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action Input: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURRENT_DATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Observation: </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURRENT_DATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Thought: The query looks correct, I should execute it</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action: sql_db_query</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action Input: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURRENT_DATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Observation: Error: (sqlite3.OperationalError) near </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;(&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: syntax error</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SQL</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURRENT_DATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(Background on this error at: https:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">//</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">sqlalche.me</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">20</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">e3q8)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Thought: I should check the query before executing it</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action: sql_db_query_checker</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action Input: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURRENT_DATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Observation: </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURRENT_DATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Thought: The query looks correct, I should execute it</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action: sql_db_query</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action Input: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURRENT_DATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Observation: Error: (sqlite3.OperationalError) near </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;(&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: syntax error</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SQL</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURRENT_DATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(Background on this error at: https:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">//</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">sqlalche.me</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">20</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">e3q8)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Thought: I should check the query before executing it</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action: sql_db_query_checker</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action Input: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURRENT_DATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Observation: </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURRENT_DATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Thought: The query looks correct, I should execute it</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action: sql_db_query</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action Input: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURRENT_DATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Observation: Error: (sqlite3.OperationalError) near </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;(&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: syntax error</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SQL</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURRENT_DATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(Background on this error at: https:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">//</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">sqlalche.me</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">20</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">e3q8)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Thought: I should check the query before executing it</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action: sql_db_query_checker</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action Input: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURRENT_DATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Observation: </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DATE_SUB(CURRENT_DATE(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERVAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> MONTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sender </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Thought:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Finished chain.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Agent stopped due to iteration limit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">or</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> time limit.</span></span></code></pre></div><h2 id="查看最近三个月有多少封的邮件。看谁给我发的邮件最多" tabindex="-1">查看最近三个月有多少封的邮件。看谁给我发的邮件最多 <a class="header-anchor" href="#查看最近三个月有多少封的邮件。看谁给我发的邮件最多" aria-label="Permalink to &quot;查看最近三个月有多少封的邮件。看谁给我发的邮件最多&quot;">​</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> query_database</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(query):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    cols </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &#39;from_email&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;发件邮件地址&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &#39;from_name&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;发件人姓名&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &#39;subject&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;邮件主题&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &#39;date_beijing&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;邮件发送时间&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &#39;body&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;邮件内容&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    cols </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> json.dumps(cols, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">indent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    template </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;邮件表的结构为 </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">，帮我执行以下查询： </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> %</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (cols, query)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> agent_executor.run(template)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> response</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(query_database(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;查看最近三个月有多少封的邮件。看谁给我发的邮件最多？&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">pass</span></span></code></pre></div><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Entering new AgentExecutor chain</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action: sql_db_list_tables</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action Input: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Observation: emails</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Thought: I should query the schema of the emails table</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action: sql_db_schema</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action Input: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;emails&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Observation: </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">CREATE</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails (</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">	id</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BIGINT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	from_email VARCHAR(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	from_name VARCHAR(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	subject VARCHAR(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	date_beijing TIMESTAMP(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WITHOUT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> TIME</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> ZONE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	text </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">TEXT</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/*</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> rows </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails table:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	from_email	from_name	subject	date_beijing	text</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8129</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	info</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">zmp.techtarget.com	ComputerWeekly.com	Inside Group</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">IB</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">’s cyber security playbook	</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2023</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#B31D28;--shiki-dark:#FF938A;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">11</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 19</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">39</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">57</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">	None</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8156</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	update</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">grafana.com	Grafana Labs Team	You</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;re invited: Mastering the Grafana Terraform Provider	2023-04-12 10:01:23	None</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8165</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	zzeng</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">shuyi.com.cn	曾威	git账号申请	</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2023</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#B31D28;--shiki-dark:#FF938A;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">12</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">55</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#B31D28;--shiki-dark:#FF938A;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">9</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">	None</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Thought: I should query the emails table to get the number of emails sent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> the last three months </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">and</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> who sent the most emails</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action: sql_db_query</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action Input: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> from_name, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">AS</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> num_emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date_beijing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> NOW() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> INTERVAL</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;3 months&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> from_name </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> num_emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Observation: [(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;ComputerWeekly.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">22</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), (</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;Grafana Labs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">13</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), (</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;Google Cloud&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">9</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), (</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;LeanIX Connect Summit&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), (</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;Kovair Software&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), (</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;LeanIX Team&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), (</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;Grafana Labs Team&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), (</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;胡雪泉&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), (</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;Synopsys SIG&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), (</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;llu&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Thought: I now know the final answer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Final Answer: The top </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> senders of emails </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> the last three months are ComputerWeekly.com (</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">22</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails), Grafana Labs (</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">13</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails), Google Cloud (</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">9</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails), LeanIX Connect Summit (</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails), Kovair Software (</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails), LeanIX Team (</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails), Grafana Labs Team (</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails), 胡雪泉 (</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails), Synopsys SIG (</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails), </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">and</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> llu (</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails).</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Finished chain.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">The top </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> senders of emails </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> the last three months are ComputerWeekly.com (</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">22</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails), Grafana Labs (</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">13</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails), Google Cloud (</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">9</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails), LeanIX Connect Summit (</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails), Kovair Software (</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails), LeanIX Team (</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails), Grafana Labs Team (</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails), 胡雪泉 (</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails), Synopsys SIG (</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails), </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">and</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> llu (</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails).</span></span></code></pre></div><h2 id="查看最近3个月有多少封的邮件。看谁给我发的邮件最多-用表格展示结果" tabindex="-1">查看最近3个月有多少封的邮件。看谁给我发的邮件最多？用表格展示结果 <a class="header-anchor" href="#查看最近3个月有多少封的邮件。看谁给我发的邮件最多-用表格展示结果" aria-label="Permalink to &quot;查看最近3个月有多少封的邮件。看谁给我发的邮件最多？用表格展示结果&quot;">​</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(query_database(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;查看最近3个月有多少封的邮件。看谁给我发的邮件最多？用表格展示结果&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">pass</span></span></code></pre></div><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Entering new AgentExecutor chain</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action: sql_db_list_tables</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action Input: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Observation: emails</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Thought: I should query the schema of the emails table</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action: sql_db_schema</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action Input: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;emails&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Observation: </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">CREATE</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails (</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">	id</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BIGINT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	from_email VARCHAR(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	from_name VARCHAR(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	subject VARCHAR(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	date_beijing TIMESTAMP(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WITHOUT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> TIME</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> ZONE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	text </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">TEXT</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/*</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> rows </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails table:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	from_email	from_name	subject	date_beijing	text</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8129</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	info</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">zmp.techtarget.com	ComputerWeekly.com	Inside Group</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">IB</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">’s cyber security playbook	</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2023</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#B31D28;--shiki-dark:#FF938A;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">11</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 19</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">39</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">57</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">	None</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8156</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	update</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">grafana.com	Grafana Labs Team	You</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;re invited: Mastering the Grafana Terraform Provider	2023-04-12 10:01:23	None</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8165</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	zzeng</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">shuyi.com.cn	曾威	git账号申请	</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2023</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#B31D28;--shiki-dark:#FF938A;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">12</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">55</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#B31D28;--shiki-dark:#FF938A;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">9</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">	None</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Thought: I should query the emails table to get the number of emails sent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> the last </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> months </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">and</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> the sender </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> the most emails</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action: sql_db_query</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Action Input: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> from_name, COUNT(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> num_emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> date_beijing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> NOW() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> INTERVAL</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;3 months&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> from_name </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ORDER</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> num_emails </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">DESC</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span><span style="--shiki-light:#B31D28;--shiki-dark:#FF938A;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Observation: [(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;ComputerWeekly.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">22</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), (</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;Grafana Labs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">13</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), (</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;Google Cloud&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">9</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), (</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;LeanIX Connect Summit&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), (</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;Kovair Software&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), (</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;LeanIX Team&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), (</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;Grafana Labs Team&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), (</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;胡雪泉&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), (</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;Synopsys SIG&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), (</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;llu&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Thought: I now know the final answer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Final Answer: ComputerWeekly.com 发了最多的邮件，共发了 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">22</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> 封。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Finished chain.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">ComputerWeekly.com 发了最多的邮件，共发了 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">22</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> 封。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Process finished </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">with</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> exit</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> code </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span></span></code></pre></div><hr><div style="text-align:center;color:#00000099;font-size:14px;">END</div>`,109)]))}const R=h(D,[["render",B]]);export{b as __pageData,R as default};
