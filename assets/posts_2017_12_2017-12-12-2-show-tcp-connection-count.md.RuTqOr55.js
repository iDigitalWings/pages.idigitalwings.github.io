import{_ as F}from"./chunks/ArticleMetadata.DFebsEEb.js";import{_ as o,m as g,a as c,u as e,B as l,e as p,x as C,aj as d,o as t,p as k,q as r}from"./chunks/framework.Ba_Ek9Jm.js";import"./chunks/theme.DmmjVCNk.js";const P=JSON.parse('{"title":"SSH over SSH","description":"","frontmatter":{"title":"SSH over SSH","date":"2017-12-12T00:00:00.000Z","tags":["linux"]},"headers":[],"relativePath":"posts/2017/12/2017-12-12-2-show-tcp-connection-count.md","filePath":"posts/2017/12/2017-12-12-2-show-tcp-connection-count.md","lastUpdated":1718173059000}'),y={name:"posts/2017/12/2017-12-12-2-show-tcp-connection-count.md"},D=p("h1",{id:"查看哪些ip连接本机",tabindex:"-1"},[C("查看哪些IP连接本机 "),p("a",{class:"header-anchor",href:"#查看哪些ip连接本机","aria-label":'Permalink to "查看哪些IP连接本机"'},"​")],-1),u=d('<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">netstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -an</span></span></code></pre></div><h1 id="查看tcp连接数" tabindex="-1">查看TCP连接数 <a class="header-anchor" href="#查看tcp连接数" aria-label="Permalink to &quot;查看TCP连接数&quot;">​</a></h1>',2),_=d(`<ol><li>统计80端口连接数</li></ol><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">netstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -nat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;80&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">wc</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -l</span></span></code></pre></div><ol start="2"><li>统计httpd协议连接数</li></ol><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -ef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> httpd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">wc</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -l</span></span></code></pre></div><ol start="3"><li>统计已连接上的，状态为 <code>established</code></li></ol><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">netstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -na</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ESTABLISHED</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">wc</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -l</span></span></code></pre></div><p>4)、查出哪个IP地址连接最多,将其封了</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">netstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -na</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ESTABLISHED</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">awk</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {print</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;"> $5</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">awk</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -F:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {print</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;"> $1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sort</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">uniq</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sort</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> +0n</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">netstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -na</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> SYN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">awk</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {print</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;"> $5</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">awk</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -F:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {print</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;"> $1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sort</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">uniq</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sort</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> +0n</span></span></code></pre></div><hr><ul><li><a href="http://blog.csdn.net/he_jian1/article/details/40787269" target="_blank" rel="noreferrer">查看linux中的TCP连接数</a></li></ul>`,10);function m(s,b,v,A,B,f){const h=F,n=g("ClientOnly");return t(),c("div",null,[D,e(n,null,{default:l(()=>{var i,a;return[(((i=s.$frontmatter)==null?void 0:i.aside)??!0)&&(((a=s.$frontmatter)==null?void 0:a.showArticleMetadata)??!0)?(t(),k(h,{key:0,article:s.$frontmatter},null,8,["article"])):r("",!0)]}),_:1}),u,e(n,null,{default:l(()=>{var i,a;return[(((i=s.$frontmatter)==null?void 0:i.aside)??!0)&&(((a=s.$frontmatter)==null?void 0:a.showArticleMetadata)??!0)?(t(),k(h,{key:0,article:s.$frontmatter},null,8,["article"])):r("",!0)]}),_:1}),_])}const $=o(y,[["render",m]]);export{P as __pageData,$ as default};
