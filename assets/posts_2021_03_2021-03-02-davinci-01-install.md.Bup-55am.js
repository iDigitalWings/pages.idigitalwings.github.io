import{_ as s,a,o as i,aj as n}from"./chunks/framework.Ba_Ek9Jm.js";const e="/assets/chart-types.CPg-n-01.png",m=JSON.parse('{"title":"Davinci äºŒæ¬¡å¼€å‘ 1 - ç¯å¢ƒå®‰è£…","description":"","frontmatter":{"title":"Davinci äºŒæ¬¡å¼€å‘ 1 - ç¯å¢ƒå®‰è£…","date":"2021-03-02T00:00:00.000Z","tags":["davinci","bi"]},"headers":[],"relativePath":"posts/2021/03/2021-03-02-davinci-01-install.md","filePath":"posts/2021/03/2021-03-02-davinci-01-install.md","lastUpdated":1718175555000}'),p={name:"posts/2021/03/2021-03-02-davinci-01-install.md"},t=n(`<h2 id="ä¸‹è½½é¡¹ç›®" tabindex="-1">ä¸‹è½½é¡¹ç›® <a class="header-anchor" href="#ä¸‹è½½é¡¹ç›®" aria-label="Permalink to &quot;ä¸‹è½½é¡¹ç›®&quot;">â€‹</a></h2><p>å¯å‚è€ƒ<a href="https://edp963.github.io/davinci/docs/zh/1.1-deployment" target="_blank" rel="noreferrer">æ–‡æ¡£</a></p><h2 id="å‰ç«¯" tabindex="-1">å‰ç«¯ <a class="header-anchor" href="#å‰ç«¯" aria-label="Permalink to &quot;å‰ç«¯&quot;">â€‹</a></h2><p>å‰ç«¯å®‰è£…ï¼Œä½¿ç”¨<code>yarn</code>å®‰è£…å‡ºé”™ï¼Œæœªå…³å¿ƒå…¶åŸå› ï¼Œåä½¿ç”¨ cnpm å®‰è£…ã€‚</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span>[4/5] ğŸ”—  Linking dependencies...</span></span>
<span class="line"><span>[5/5] ğŸ”¨  Building fresh packages...</span></span>
<span class="line"><span>[8/13] â ˆ pngquant-bin</span></span>
<span class="line"><span>[6/13] â ˆ mozjpeg</span></span>
<span class="line"><span>[9/13] â ˆ cwebp-bin</span></span>
<span class="line"><span>[7/13] â ˆ optipng-bin</span></span>
<span class="line"><span>error /Users/.../davinci/webapp/node_modules/gifsicle: Command failed.</span></span>
<span class="line"><span>Exit code: 1</span></span>
<span class="line"><span>Command: node lib/install.js</span></span>
<span class="line"><span>Arguments:</span></span>
<span class="line"><span>Directory: /Users/.../davinci/webapp/node_modules/gifsicle</span></span>
<span class="line"><span>Output:</span></span>
<span class="line"><span>âš  connect ECONNREFUSED 0.0.0.0:443</span></span>
<span class="line"><span>  âš  gifsicle pre-build test failed</span></span>
<span class="line"><span>  â„¹ compiling from source</span></span>
<span class="line"><span>  âœ– Error: Command failed: /bin/sh -c autoreconf -ivf</span></span>
<span class="line"><span>/bin/sh: autoreconf: command not found</span></span></code></pre></div><p>ä½¿ç”¨ <code>cnpm start</code> å¯åŠ¨è®¿é—® <a href="http://127.0.0.1:5002" target="_blank" rel="noreferrer"> http://127.0.0.1:5002</a>ï¼Œç”±äºæ²¡æœ‰åç«¯ï¼Œè¿‡äº†å¾ˆä¹…ä¹‹åå‡ºç°ç™»å½•ç•Œé¢ã€‚</p><h2 id="åç«¯" tabindex="-1">åç«¯ <a class="header-anchor" href="#åç«¯" aria-label="Permalink to &quot;åç«¯&quot;">â€‹</a></h2><h3 id="é…ç½®ç¯å¢ƒå˜é‡" tabindex="-1">é…ç½®ç¯å¢ƒå˜é‡ <a class="header-anchor" href="#é…ç½®ç¯å¢ƒå˜é‡" aria-label="Permalink to &quot;é…ç½®ç¯å¢ƒå˜é‡&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span>export DAVINCI3_HOME=~/app/davinci/davinci-assembly_3.0.1-0.3.0-SNAPSHOT-dist</span></span></code></pre></div><h3 id="åˆ›å»ºæ•°æ®åº“å¹¶å¯¼å…¥æ•°æ®" tabindex="-1">åˆ›å»ºæ•°æ®åº“å¹¶å¯¼å…¥æ•°æ® <a class="header-anchor" href="#åˆ›å»ºæ•°æ®åº“å¹¶å¯¼å…¥æ•°æ®" aria-label="Permalink to &quot;åˆ›å»ºæ•°æ®åº“å¹¶å¯¼å…¥æ•°æ®&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span>mysql -P 3306 -h localhost -u root -proot davinci0.3 &lt; $DAVINCI3_HOME/bin/davinci.sql</span></span></code></pre></div><p>æˆ–è€…æ‰§è¡Œè„šæœ¬åˆå§‹åŒ–æ•°æ®åº“ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span>sh bin/initdb.sh</span></span></code></pre></div><p>ç„¶åä¿®æ”¹ <code>davinci/config/application.yml</code> çš„æ•°æ®åº“é“¾æ¥ã€‚</p><h3 id="ä¿®æ­£jdkç‰ˆæœ¬" tabindex="-1">ä¿®æ­£JDKç‰ˆæœ¬ <a class="header-anchor" href="#ä¿®æ­£jdkç‰ˆæœ¬" aria-label="Permalink to &quot;ä¿®æ­£JDKç‰ˆæœ¬&quot;">â€‹</a></h3><p>è¿è¡Œç¨‹åºæç¤º</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span>/Users/.../davinci/server/src/main/java/edp/core/utils/FileUtils.java:23:32</span></span>
<span class="line"><span>java: package com.sun.image.codec.jpeg does not exist</span></span></code></pre></div><p><code>com.sun.image.codec.jpeg</code> å·²ç»åœ¨ java 7 ä¸­ç§»é™¤ï¼Œ</p><p>ä¿®æ”¹</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">JPEGImageEncoder</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> encoder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> JPEGCodec.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">createJPEGEncoder</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(output);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">encoder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">encode</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(img_dest);</span></span></code></pre></div><p>ä¸ºï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">assert</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> img_dest </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">ImageIO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">write</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(img_dest, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;jpeg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, output);</span></span></code></pre></div><p>å»æ‰è¿™ä¸¤ä¸ªå¼•ç”¨ã€‚</p><h3 id="å…¶ä»–é”™è¯¯" tabindex="-1">å…¶ä»–é”™è¯¯ <a class="header-anchor" href="#å…¶ä»–é”™è¯¯" aria-label="Permalink to &quot;å…¶ä»–é”™è¯¯&quot;">â€‹</a></h3><h4 id="ç±»æ‰¾ä¸åˆ°" tabindex="-1">ç±»æ‰¾ä¸åˆ° <a class="header-anchor" href="#ç±»æ‰¾ä¸åˆ°" aria-label="Permalink to &quot;ç±»æ‰¾ä¸åˆ°&quot;">â€‹</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span>NoClassDefFoundError: Could not initialize class org.hibernate.validator.internal.engine.valueextraction.ValueExtractorManager</span></span></code></pre></div><p>åˆæ­¥åˆ¤å®šæ˜¯ä¾èµ–é—®é¢˜ï¼Œä¸ºäº†ä»¥åäºŒæ¬¡å¼€å‘æ–¹ä¾¿ï¼ŒæŠŠå¸¸ç”¨çš„åº“éƒ½å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span>springboot: 2.4.3</span></span>
<span class="line"><span>spring-boot-starter-oauth2-client: 2.4.3</span></span>
<span class="line"><span>druidï¼› 1.2.5</span></span>
<span class="line"><span>mybatis-spring-boot-starter: 2.1.4</span></span></code></pre></div><p>å¢åŠ  <code>org.springframework.boot:spring-boot-starter-validation</code> çš„ä¾èµ–ã€‚</p><h3 id="å¯åŠ¨" tabindex="-1">å¯åŠ¨ <a class="header-anchor" href="#å¯åŠ¨" aria-label="Permalink to &quot;å¯åŠ¨&quot;">â€‹</a></h3><p>é»˜è®¤ç”¨æˆ·æ˜¯ guest/123456ï¼Œä¹Ÿå¯ä»¥æ–°å»ºä¸€ä¸ªç”¨æˆ·ã€‚ï¼ˆå¦‚æœä¸æƒ³é…ç½®é‚®ä»¶æœåŠ¡å¯ä»¥ä¿®æ”¹ CheckConfigRunner çš„é€»è¾‘ï¼‰</p><p>ç™»å½• <code>http://127.0.0.1:5002/</code> å³å¯ä»¥è®¿é—®ã€‚</p><h2 id="æµ‹è¯•å¼€å‘" tabindex="-1">æµ‹è¯•å¼€å‘ <a class="header-anchor" href="#æµ‹è¯•å¼€å‘" aria-label="Permalink to &quot;æµ‹è¯•å¼€å‘&quot;">â€‹</a></h2><p>å‚è€ƒ <a href="https://dumplingbao.github.io/2020/03/19/davinci-dev-bmap/" target="_blank" rel="noreferrer">disså¸¦ç </a> çš„æ•™ç¨‹ï¼Œåšä¸€ä¸ªå¼€å‘è¯•è¯•</p><p>index.html</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;text/javascript&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;//api.map.baidu.com/api?type=webgl&amp;v=1.0&amp;ak=æ‚¨çš„å¯†é’¥&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span></code></pre></div><p>davinci/webapp/app/containers/Widget/config/chart/bmap.ts</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> map</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> IChartInfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  id: ChartTypes.BMap,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;bmap&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  title: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;ç™¾åº¦åœ°å›¾&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  icon: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;icon-china&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// å›¾æ ‡å…ˆç”¨åŸæ¥çš„ä¸­å›½åœ°å›¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  coordinate: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;cartesian&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  rules: [{ dimension: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">9999</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">], metric: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> }],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  dimetionAxis: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;col&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>ChartTypes.ts</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">   * ç™¾åº¦åœ°å›¾</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">   */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  BMap </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 18</span></span></code></pre></div><p><code>davinci/webapp/app/containers/Widget/config/chart/index.tsx</code>å¢åŠ  bmap çš„å¼•ç”¨ï¼Œå¹¶æ·»åŠ åˆ° chart å¯¹è±¡é‡Œé¢ã€‚</p><p>åˆ·æ–°åº”ç”¨å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„ç±»å‹é‡Œé¢å¢åŠ äº†ç™¾åº¦åœ°å›¾ï¼Œ</p><p><img src="`+e+'" alt=""></p>',43),l=[t];function h(d,c,o,r,k,g){return i(),a("div",null,l)}const b=s(p,[["render",h]]);export{m as __pageData,b as default};
