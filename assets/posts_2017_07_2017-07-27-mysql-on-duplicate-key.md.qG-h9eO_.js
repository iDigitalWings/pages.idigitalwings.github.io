import{_ as i,a,af as n,o as h}from"./chunks/framework.C87LdZyP.js";const g=JSON.parse('{"title":"MySql: ON DUPLICATE KEY","description":"","frontmatter":{"title":"MySql: ON DUPLICATE KEY","date":"2017-07-27T00:00:00.000Z","tags":["mysql","sql"]},"headers":[],"relativePath":"posts/2017/07/2017-07-27-mysql-on-duplicate-key.md","filePath":"posts/2017/07/2017-07-27-mysql-on-duplicate-key.md","lastUpdated":1718193786000}'),p={name:"posts/2017/07/2017-07-27-mysql-on-duplicate-key.md"};function k(l,s,t,e,d,A){return h(),a("div",null,s[0]||(s[0]=[n(`<p>MySql的<code>INSERT ... ON DUPLICATE KEY</code>语法,在插入时候, 如果遇到唯一索引列重复,就会忽略插入.</p><p>这个语法可以让我们避免插入重复的记录,或者拿来批量更新数据,提高效率.</p><p>首先看下数据:</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    id, warehouseCode, companyCode, loadId</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    shipment_header</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">limit</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> , </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">9</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span></code></pre></div><p>查询出:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span>&#39;478331&#39;	 &#39;YTYC&#39;	 &#39;JXSG&#39;	 &#39;0&#39;</span></span>
<span class="line"><span>&#39;478332&#39;	 &#39;YTYC&#39;	 &#39;JXSG&#39;	 &#39;0&#39;</span></span>
<span class="line"><span>&#39;478333&#39;	 &#39;YTYC&#39;	 &#39;JXSG&#39;	 &#39;0&#39;</span></span>
<span class="line"><span>&#39;478334&#39;	 &#39;YTYC&#39;	 &#39;JXSG&#39;	 &#39;0&#39;</span></span>
<span class="line"><span>&#39;478335&#39;	 &#39;YTYC&#39;	 &#39;JXSG&#39;	 &#39;0&#39;</span></span>
<span class="line"><span>&#39;478336&#39;	 &#39;YTYC&#39;	 &#39;JXSG&#39;	 &#39;0&#39;</span></span>
<span class="line"><span>&#39;478337&#39;	 &#39;YTYC&#39;	 &#39;JXSG&#39;	 &#39;0&#39;</span></span>
<span class="line"><span>&#39;478338&#39;	 &#39;YTYC&#39;	 &#39;JXSG&#39;	 &#39;0&#39;</span></span>
<span class="line"><span>&#39;478339&#39;	 &#39;YTYC&#39;	 &#39;JXSG&#39;	 &#39;0&#39;</span></span></code></pre></div><p>执行:</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">INSERT INTO</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> shipment_header</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	(id, warehouseCode, companyCode, loadId)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">VALUES</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;478331&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;YTYC&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;JXSG&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;478332&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;YTYC&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;JXSG&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;478333&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;YTYC&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;JXSG&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;478334&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;YTYC&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;JXSG&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;478335&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;YTYC&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;JXSG&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;478336&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;YTYC&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;JXSG&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;478337&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;YTYC&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;JXSG&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;478338&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;YTYC&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;JXSG&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;478339&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;YTYC&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;JXSG&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">ON</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DUPLICATE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> UPDATE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	loadId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=values</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(loadId)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	companyCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;ALAN&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	warehouseCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">companyCode;</span></span></code></pre></div><p>得到结果:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span>&#39;478331&#39;, &#39;ALAN&#39;, &#39;ALAN&#39;, &#39;1&#39;</span></span>
<span class="line"><span>&#39;478332&#39;, &#39;ALAN&#39;, &#39;ALAN&#39;, &#39;2&#39;</span></span>
<span class="line"><span>&#39;478333&#39;, &#39;ALAN&#39;, &#39;ALAN&#39;, &#39;2&#39;</span></span>
<span class="line"><span>&#39;478334&#39;, &#39;ALAN&#39;, &#39;ALAN&#39;, &#39;2&#39;</span></span>
<span class="line"><span>&#39;478335&#39;, &#39;ALAN&#39;, &#39;ALAN&#39;, &#39;1&#39;</span></span>
<span class="line"><span>&#39;478336&#39;, &#39;ALAN&#39;, &#39;ALAN&#39;, &#39;1&#39;</span></span>
<span class="line"><span>&#39;478337&#39;, &#39;ALAN&#39;, &#39;ALAN&#39;, &#39;1&#39;</span></span>
<span class="line"><span>&#39;478338&#39;, &#39;ALAN&#39;, &#39;ALAN&#39;, &#39;1&#39;</span></span>
<span class="line"><span>&#39;478339&#39;, &#39;ALAN&#39;, &#39;ALAN&#39;, &#39;1&#39;</span></span></code></pre></div><p><code>warehouseCode</code>使用的是新 companyCode\`值,和代码书写的顺序一致.</p><p>再执行:</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">INSERT INTO</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> shipment_header</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	(id, warehouseCode, companyCode, loadId)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">VALUES</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;478331&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;YTYC&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;JXSG&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;478332&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;YTYC&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;JXSG&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;478333&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;YTYC&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;JXSG&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;478334&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;YTYC&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;JXSG&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;478335&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;YTYC&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;JXSG&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;478336&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;YTYC&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;JXSG&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;478337&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;YTYC&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;JXSG&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;478338&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;YTYC&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;JXSG&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;478339&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;YTYC&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;JXSG&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,	 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">ON</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DUPLICATE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> UPDATE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	loadId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=values</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(loadId)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	warehouseCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">companyCode,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	companyCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;WANG&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span></code></pre></div><p>得到</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span>&#39;478331&#39;, &#39;ALAN&#39;, &#39;WANG&#39;, &#39;1&#39;</span></span>
<span class="line"><span>&#39;478332&#39;, &#39;ALAN&#39;, &#39;WANG&#39;, &#39;2&#39;</span></span>
<span class="line"><span>&#39;478333&#39;, &#39;ALAN&#39;, &#39;WANG&#39;, &#39;2&#39;</span></span>
<span class="line"><span>&#39;478334&#39;, &#39;ALAN&#39;, &#39;WANG&#39;, &#39;2&#39;</span></span>
<span class="line"><span>&#39;478335&#39;, &#39;ALAN&#39;, &#39;WANG&#39;, &#39;1&#39;</span></span>
<span class="line"><span>&#39;478336&#39;, &#39;ALAN&#39;, &#39;WANG&#39;, &#39;1&#39;</span></span>
<span class="line"><span>&#39;478337&#39;, &#39;ALAN&#39;, &#39;WANG&#39;, &#39;1&#39;</span></span>
<span class="line"><span>&#39;478338&#39;, &#39;ALAN&#39;, &#39;WANG&#39;, &#39;1&#39;</span></span>
<span class="line"><span>&#39;478339&#39;, &#39;ALAN&#39;, &#39;WANG&#39;, &#39;1&#39;</span></span></code></pre></div><p><code>warehouseCode</code>使用的是原来的值,和代码书写的顺序一致.</p><hr><p>PS: MySql避免重复插入还有另外两种方式:</p><ul><li>ignore<div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">INSERT IGNORE INTO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> \`table_name\`</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(...) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">values</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (...)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> INSERT IGNORE INTO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> \`table_1\`</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">\`name\`</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">SELECT</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> \`name\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> \`table_2\`</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span></code></pre></div></li><li>replace<div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  复制代码</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">REPLACE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> INTO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> \`table_name\`</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">\`col_name\`</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, ...) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">VALUES</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (...);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">REPLACE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> INTO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> \`table_name\`</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">\`col_name\`</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, ...) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> ...;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">REPLACE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> INTO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> \`table_name\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> SET</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> \`col_name\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;value&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span></code></pre></div></li></ul><hr><div style="text-align:center;color:#00000099;font-size:14px;">END</div>`,21)]))}const F=i(p,[["render",k]]);export{g as __pageData,F as default};
