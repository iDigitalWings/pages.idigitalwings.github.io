import{_ as i,a,af as n,o as t}from"./chunks/framework.C87LdZyP.js";const h="/assets/3347867383385625.CVIhLDuo.png",p="/assets/3359706365610416.HcsEq-Wu.png",l="/assets/3346521982651250.wJm9WJuS.png",k="/assets/3346716549677791.DeOcWrPt.png",e="/assets/3346895434939333.D4nfsjFf.png",d="/assets/3349419185996291.Q4O-WY7_.png",r="/assets/3350496526122541.Bnf19v2Q.png",g="/assets/3361791657098708.BuFoX-_B.png",o="/assets/3350590017215583.7cWg3hxQ.png",C="/assets/3350668870328666.BiEMbFIg.png",A="/assets/3350700454174625.CiilEJEF.png",y="/assets/3350813901123333.Btdphfun.png",c="/assets/3350924044997500.2kI01wpY.png",D="/assets/3351049437581291.CD3lMzfb.png",F="/assets/3351364001363458.CFEeGp4o.png",B="/assets/3352355748894166.BKWq8_28.png",E="/assets/3358300111831291.BnWKQK7Y.png",m="/assets/3353589159652541.CzMBGAyA.png",u="/assets/3354258974283791.CCGhzjJA.png",w=JSON.parse('{"title":"《构建个人知识图谱》004：增加知识图谱的用户交互","description":"","frontmatter":{"title":"《构建个人知识图谱》004：增加知识图谱的用户交互","date":"2023-07-21T00:00:00.000Z","tags":["ai","ml"],"category":["AI"]},"headers":[],"relativePath":"topics/knowledge-graph/articles/2023-07-21-knowledge-graph-004-interaction.md","filePath":"topics/knowledge-graph/articles/2023-07-21-knowledge-graph-004-interaction.md","lastUpdated":1718173059000}'),b={name:"topics/knowledge-graph/articles/2023-07-21-knowledge-graph-004-interaction.md"};function v(x,s,_,f,q,j){return t(),a("div",null,s[0]||(s[0]=[n('<div class="admonition abstract"><p class="admonition-title">abstract</p><p>知识图谱展示完好，但是少了一些人机交互和细节。今天为知识图谱增加必要的交互能力。对这个知识图谱界面做一些功能交互上的丰富。</p></div><h2 id="数据统计" tabindex="-1">数据统计 <a class="header-anchor" href="#数据统计" aria-label="Permalink to &quot;数据统计&quot;">​</a></h2><p>这两天我都把知识图谱的界面一直打开着，用到什么东西如果有必要都加到知识图谱里面，现在看起来已经初具规模了。</p><p><img src="'+h+`" alt="最近几天记录知识图谱的成果"></p><p>但是我也不知道我加了几个节点。所以数据统计功能肯定必不可少啦。</p><p>直接一个 div 放到屏幕左下角，调整下边距和颜色：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;absolute bottom-0 left-0 z-20 text-sm text-gray-500 pl-4 pb-2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  {{ nodes.length }} nodes / {{ edges.length }} edges</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span></code></pre></div><p>看看效果：</p><p><img src="`+p+'" alt="增加数据统计显示"></p><p>完美，我知道我现在有 <strong>101 个节点</strong> 和 <strong>120 个边</strong>了。</p><h2 id="搜索节点和定位" tabindex="-1">搜索节点和定位 <a class="header-anchor" href="#搜索节点和定位" aria-label="Permalink to &quot;搜索节点和定位&quot;">​</a></h2><p>随着日常的对知识图谱的维护，节点数量会越来越多，图谱变得越来越复杂，想找某个东西就变得越来越困难。 就比如我的 101 个节点，我想从中找到我想要的节点就很困难：</p><p><img src="'+l+'" alt="101个节点的知识图谱已经一眼看不过来了"></p><h4 id="搜索节点" tabindex="-1">搜索节点 <a class="header-anchor" href="#搜索节点" aria-label="Permalink to &quot;搜索节点&quot;">​</a></h4><p>一个一个点去找肯定不可能的，那就给知识图谱加上搜索功能。</p><p>搜索功能的设计也很简单，我决定搞一个下拉框，把所有节点的数据作为下拉选项，根据名称搜索。放到屏幕的左上角，然后把这这一排按钮往后放一放。</p><p>效果出来了：</p><p><img src="'+k+'" alt="知识图谱增加搜索下拉框"></p><p>搜索的时候可以根据关键词快速过滤，也可以直接滚动选择选择：</p><p><img src="'+e+`" alt="知识图谱搜索框下拉数据"></p><h4 id="节点定位" tabindex="-1">节点定位 <a class="header-anchor" href="#节点定位" aria-label="Permalink to &quot;节点定位&quot;">​</a></h4><p>搜索完之后，我发现搜索了个寂寞，图谱啥反应没有，这不成，就像军训教官点名一样，叫到谁谁立刻马上给我出列才对。</p><p>不过从交互上来说，让节点出列是不太好办，不过我们可以让 3d 场景的<strong>镜头对准选中的节点</strong>，并且给定位的节点一个<strong>高亮</strong>。</p><p>我们借用一下 force-3d 官网 Examaple 的代码：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> onNodeClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">node</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {}) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> distance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 200</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> distRatio</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> distance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">hypot</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(node.x, node.y, node.z)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> newPos</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    node.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> node.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> node.z</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">      ?</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { x: node.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> distRatio, y: node.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> distRatio, z: node.z </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> distRatio }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">      :</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { x: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, y: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, z: distance } </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  g.value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">cameraPosition</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(newPos, node, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  g.value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">nodeColor</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(g.value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">nodeColor</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()) </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>看下效果：</p><p><img src="`+d+`" alt="知识图谱搜索定位  视频"></p><h2 id="图谱样式优化之路" tabindex="-1">图谱样式优化之路 <a class="header-anchor" href="#图谱样式优化之路" aria-label="Permalink to &quot;图谱样式优化之路&quot;">​</a></h2><p>图谱用着用着我就发现还是有点儿不太尽如人意，于是便进行了一系列折腾。</p><h4 id="只显示文本" tabindex="-1">只显示文本 <a class="header-anchor" href="#只显示文本" aria-label="Permalink to &quot;只显示文本&quot;">​</a></h4><p>有时候我想<strong>只看文本</strong>，圆点有点儿干扰我的视线了，于是调整 <code>nodeThreeObjectExtend</code> 参数：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Graph</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">nodeThreeObject</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">node</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> getSprite</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(node))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">nodeThreeObjectExtend</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span></code></pre></div><p><img src="`+r+'" alt="只显示文本的效果"></p><p>把镜头拉进一点看看：</p><p><img src="'+g+`" alt="只显示文本的效果（近距离）"></p><h4 id="文本颜色加亮" tabindex="-1">文本颜色加亮 <a class="header-anchor" href="#文本颜色加亮" aria-label="Permalink to &quot;文本颜色加亮&quot;">​</a></h4><p>文本颜色有点儿浅，调亮一点：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Graph.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">nodeThreeObject</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">node</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> sprite</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> SpriteText</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(node.name)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  sprite.color </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;#FFFFFF&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sprite</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">})</span></span></code></pre></div><p><img src="`+o+`" alt="文本颜色调亮"></p><h4 id="文本换色" tabindex="-1">文本换色 <a class="header-anchor" href="#文本换色" aria-label="Permalink to &quot;文本换色&quot;">​</a></h4><p>看了一会儿看腻了，又想换个颜色：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Graph.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">nodeThreeObject</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">node</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> sprite</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> SpriteText</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(node.name)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  sprite.color </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;#0ca1c0&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sprite</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">})</span></span></code></pre></div><p>青色对比更强一点儿，青花瓷？</p><p><img src="`+C+`" alt="知识图板字体颜色"></p><p>没几分钟又看腻了，觉得红色的更酷一点：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Graph.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">nodeThreeObject</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">node</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> sprite</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> SpriteText</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(node.name)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  sprite.color </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;#e62c9b&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sprite</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">})</span></span></code></pre></div><p>红色果然酷一点，就是有点儿偏粉色怎么回事儿。</p><p><img src="`+A+`" alt="知识图谱红色字体"></p><h4 id="字体大小" tabindex="-1">字体大小 <a class="header-anchor" href="#字体大小" aria-label="Permalink to &quot;字体大小&quot;">​</a></h4><p>颜色先不折腾了，用着用着觉得字太小了，调大一点：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Graph.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">nodeThreeObject</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">node</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> sprite</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> SpriteText</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(node.name)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  sprite.material.depthWrite </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  sprite.textHeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 20</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  sprite.color </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> nodeCtrl.value.textColor</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sprite</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">})</span></span></code></pre></div><p>这样不那么费眼睛了。</p><p><img src="`+y+`" alt="知识图谱字体大小"></p><blockquote><p>这篇文章正文字体我也悄悄调大了一丁点儿</p></blockquote><h4 id="不显示文字" tabindex="-1">不显示文字 <a class="header-anchor" href="#不显示文字" aria-label="Permalink to &quot;不显示文字&quot;">​</a></h4><p>又过了一会儿，我发现我只想看球球，可能截图更好看，于是乎：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Graph</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">nodeThreeObject</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">node</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">nodeThreeObjectExtend</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span></code></pre></div><p>还不错，回到我最初的样子了。</p><p><img src="`+c+`" alt="知识图谱不显示文字"></p><h4 id="球体发光" tabindex="-1">球体发光 <a class="header-anchor" href="#球体发光" aria-label="Permalink to &quot;球体发光&quot;">​</a></h4><p>球球不够炫酷，灰不拉机的，给球球打个光吧：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> bloomPass</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> UnrealBloomPass</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">bloomPass.strength </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">bloomPass.radius </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">bloomPass.threshold </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Graph.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">postProcessingComposer</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">addPass</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(bloomPass)</span></span></code></pre></div><blockquote><p>bloomPass 效果我当然不会写，还是借官网 Examples 的用一用。</p></blockquote><p><img src="`+D+`" alt="知识图谱节点增加发光特效"></p><h4 id="球体大小" tabindex="-1">球体大小 <a class="header-anchor" href="#球体大小" aria-label="Permalink to &quot;球体大小&quot;">​</a></h4><p>看久了觉得球球太小了，把球球放大一点：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Graph.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">nodeVal</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">node</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> NodeValue</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 50</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">})</span></span></code></pre></div><p>这有点儿像二维 Chart 里面的气泡图了。</p><p><img src="`+F+`" alt="知识图谱节点大小"></p><h4 id="动态大小" tabindex="-1">动态大小 <a class="header-anchor" href="#动态大小" aria-label="Permalink to &quot;动态大小&quot;">​</a></h4><p>每一个节点的权重不一样，有的关系多，有的关系少。每个球都一样的大小不合适，根据关系多少决定大小更好一点：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Graph.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">nodeVal</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">node</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> NodeValue</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> node.links </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> node.links.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> :</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> count </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">})</span></span></code></pre></div><p>效果如下：</p><p><img src="`+B+'" alt="根据关系多少显示大小"></p><p>可能是数据少，效果不是那么明显，不过也还不错。</p><h2 id="动态调整显示属性" tabindex="-1">动态调整显示属性 <a class="header-anchor" href="#动态调整显示属性" aria-label="Permalink to &quot;动态调整显示属性&quot;">​</a></h2><p>优化了这么多样式，不停的改代码，虽然不难，但是挺烦人的。</p><p>一劳永逸的解决这个问题，还是要在界面上让用户（也就是我自己）动态设置显示属性。</p><p>还记得我们之前安装过 <strong><a href="https://github.com/dataarts/dat.gui" target="_blank" rel="noreferrer">dat.GUI</a></strong>，这个前端库么， 这是我之前在做互动艺术相关程序是经常用到的一个工具。如今可以派上用场了。</p><div class="admonition note"><p class="admonition-title">dat.GUI</p><p><code>dat.GUI</code> 提供了一个很棒的控制器 UI，可以方便的编辑颜色、文本、复选框、数字等属性。 <img src="'+E+`" alt="dat.GUI 示例"></p></div><p>把刚才改动的样式，都作为变量加到控制器里面。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> gui</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> GUI</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">({ name: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;知识图谱控制器&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> folder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> gui.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">addFolder</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;节点&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">folder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(nodeCtrl.value, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;size&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">folder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(nodeCtrl.value, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;dynamicSize&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">folder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(nodeCtrl.value, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;showCircle&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">folder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(nodeCtrl.value, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;showText&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">folder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">addColor</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(nodeCtrl.value, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;textColor&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">folder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(nodeCtrl.value, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;textSize&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">folder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(nodeCtrl.value, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;textToFront&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">folder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(nodeCtrl.value, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;bloom&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">folder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">onChange</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(updateNodeStyle)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">folder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span></code></pre></div><p>调整下位置放到搜索框下面，同时增加一个半透明效果：</p><p><img src="`+m+'" alt="增加控制器"></p><p>最后看看控制器的效果：</p><p><img src="'+u+'" alt="知识图谱控制器交互展示 视频"></p><h2 id="其他交互提升" tabindex="-1">其他交互提升 <a class="header-anchor" href="#其他交互提升" aria-label="Permalink to &quot;其他交互提升&quot;">​</a></h2><p>界面交互其实还有很多可以优化的地方，比如：</p><ul><li>区分节点级别，对不同节点展示不同的效果；</li><li>增加过滤功能，按需要展示部分节点；</li><li>显示样式还是比较平淡，可以增加更好的3d 效果；</li><li>连线的颜色和粗细也可以动态调整；</li><li>可以对连线增加动画效果，让关系更加清楚；</li><li>字体现在在球球里面，可以在球球外面显示，看的更清楚；</li><li>对节点增加各种布局；</li><li>。。。</li></ul><p>当然优化永无止尽的，很多时候我们主打一个够用就行。后期我也分享一些企业级知识图谱的特效和交互， 关于界面交互大家有新的想法可以留言或者私信跟我交流。</p>',90)]))}const G=i(b,[["render",v]]);export{w as __pageData,G as default};
