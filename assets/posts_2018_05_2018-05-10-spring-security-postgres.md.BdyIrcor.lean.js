import{_ as e,a as t,af as a,o as i}from"./chunks/framework.C87LdZyP.js";const g=JSON.parse('{"title":"Spring Security Postgresql","description":"","frontmatter":{"title":"Spring Security Postgresql","date":"2018-05-10T00:00:00.000Z","tags":["spring-security","postgres"],"category":["Java"]},"headers":[],"relativePath":"posts/2018/05/2018-05-10-spring-security-postgres.md","filePath":"posts/2018/05/2018-05-10-spring-security-postgres.md","lastUpdated":1718173059000}'),n={name:"posts/2018/05/2018-05-10-spring-security-postgres.md"};function r(o,s,p,c,l,d){return i(),t("div",null,s[0]||(s[0]=[a(`<div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">auth.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">jdbcAuthentication</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">            .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">dataSource</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(dataSource)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">            .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">withDefaultSchema</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">();</span></span></code></pre></div><p>Spring 默认的建表语句不兼容postgers，会出现如下错误：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span>Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.security.oauth2.authserver.OAuth2AuthorizationServerConfiguration&#39;: Bean instantiation via constructor failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.security.oauth2.authserver.OAuth2AuthorizationServerConfiguration$$EnhancerBySpringCGLIB$$8f3b1526]: Constructor threw exception; nested exception is org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #1 of class path resource [org/springframework/security/core/userdetails/jdbc/users.ddl]: create table users(username varchar_ignorecase(50) not null primary key,password varchar_ignorecase(500) not null,enabled boolean not null); nested exception is org.postgresql.util.PSQLException: ERROR: type &quot;varchar_ignorecase&quot; does not exist</span></span>
<span class="line"><span>  Position: 29</span></span></code></pre></div><p>没去搜索相关的解决方案，暂时去掉<code>withDefaultSchema</code>，手动建表。</p>`,4)]))}const u=e(n,[["render",r]]);export{g as __pageData,u as default};
