import{_ as n,a,af as i,o as t}from"./chunks/framework.C87LdZyP.js";const k=JSON.parse('{"title":"Listening Events using Slot","description":"","frontmatter":{"title":"Listening Events using Slot","date":"2017-09-11T00:00:00.000Z","tags":["vue","slot"],"category":["前端"]},"headers":[],"relativePath":"posts/2017/09/2017-09-11-vue-slot-events.md","filePath":"posts/2017/09/2017-09-11-vue-slot-events.md","lastUpdated":1718193786000}'),e={name:"posts/2017/09/2017-09-11-vue-slot-events.md"};function l(p,s,h,o,r,c){return t(),a("div",null,s[0]||(s[0]=[i(`<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span>You cannot listen to events on &lt;slot&gt;. It can end up rendering anything: text, plain element, multiple nodes... the behavior will be unpredictable.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>It seems you are trying to make a slot container communicate with a slot child - in most cases this means the two components are coupled by-design, so you can do something like this.$parent.$emit(...) from the child, and listen to that event in the parent with this.$on(...).</span></span>
<span class="line"><span></span></span>
<span class="line"><span>I am still open to ideas on improving the ways slot parent and child can communicate, but events on &lt;slot&gt; doesn&#39;t really sound like a right direction to me.</span></span></code></pre></div><h3 id="parent" tabindex="-1">Parent <a class="header-anchor" href="#parent" aria-label="Permalink to &quot;Parent&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  mounted</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(){</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">$on</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;clickStep&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, ()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">          console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span></code></pre></div><h3 id="child" tabindex="-1">Child <a class="header-anchor" href="#child" aria-label="Permalink to &quot;Child&quot;">​</a></h3><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">div</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">    class</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;el-step&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">    :style</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;[style,  isLast ? &#39;&#39; : { marginRight: - $parent.stepOffset + &#39;px&#39; }]&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">    :class</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;[&#39;is-&#39; + $parent.direction]&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">    @click</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;$parent.$emit(&#39;clickStep&#39;)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    ...</span></span></code></pre></div><h3 id="other-answer" tabindex="-1">other answer <a class="header-anchor" href="#other-answer" aria-label="Permalink to &quot;other answer&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span>I&#39;m having this same problem. I don&#39;t think it is possible to listen to events on slots. However, you can listen in the child component and just emit the same event, then it works. This is not ideal, but I think this due to some limitation with slots. Here is a related issue. https://github.com/vuejs/vue/issues/43322</span></span>
<span class="line"><span></span></span>
<span class="line"><span>This is my child component</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;template&gt;</span></span>
<span class="line"><span>    &lt;li class=&quot;action-item&quot;&gt;</span></span>
<span class="line"><span>        &lt;a :href=&quot;url&quot; @click=&quot;clicked($event)&quot;&gt;</span></span>
<span class="line"><span>            &lt;slot&gt;&lt;/slot&gt;</span></span>
<span class="line"><span>        &lt;/a&gt;</span></span>
<span class="line"><span>    &lt;/li&gt;</span></span>
<span class="line"><span>&lt;/template&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;script&gt;</span></span>
<span class="line"><span>    export default {</span></span>
<span class="line"><span>        props: [&#39;records&#39;, &#39;url&#39;],</span></span>
<span class="line"><span>        methods: {</span></span>
<span class="line"><span>            clicked($event) {</span></span>
<span class="line"><span>                this.$emit(&#39;click&#39;, $event);</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>&lt;/script&gt;</span></span>
<span class="line"><span>Then in the parent component, I can do this.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;parent&gt;</span></span>
<span class="line"><span>    &lt;child @click=&quot;doSomething&quot;&gt;&lt;/child&gt;</span></span>
<span class="line"><span>    &lt;child @click=&quot;doSomethingElse&quot;&gt;&lt;/child&gt;</span></span>
<span class="line"><span>&lt;/parent&gt;</span></span>
<span class="line"><span>I would be really happy if I didn&#39;t have to do this. So, someone please correct me if I&#39;m wrong here.</span></span></code></pre></div><hr><p>Links:</p><ul><li><a href="https://github.com/vuejs/vue/issues/4332" target="_blank" rel="noreferrer">Is it possible to emit event from component inside slot #4332</a></li><li><a href="https://forum.vuejs.org/t/listen-on-events-when-using-slots/2519/2" target="_blank" rel="noreferrer">https://forum.vuejs.org/t/listen-on-events-when-using-slots/2519/2</a></li><li><a href="https://cn.vuejs.org/v2/guide/components.html#%E4%BD%BF%E7%94%A8%E6%8F%92%E6%A7%BD%E5%88%86%E5%8F%91%E5%86%85%E5%AE%B9" target="_blank" rel="noreferrer">https://cn.vuejs.org/v2/guide/components.html#使用插槽分发内容</a></li></ul><hr><div style="text-align:center;color:#00000099;font-size:14px;">END</div>`,12)]))}const g=n(e,[["render",l]]);export{k as __pageData,g as default};
