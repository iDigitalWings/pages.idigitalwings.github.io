import{_ as s,a as i,o as a,aj as t}from"./chunks/framework.Ba_Ek9Jm.js";const c=JSON.parse('{"title":"Transformer å¿«é€Ÿå¼€å§‹","description":"","frontmatter":{"title":"Transformer å¿«é€Ÿå¼€å§‹","date":"2023-02-26T00:00:00.000Z","tags":["ai","ml","gpt","transformer"],"category":["AI"],"sidebar":"transformer"},"headers":[],"relativePath":"posts/2023/02/2023-02-26-transformer-quicktour.md","filePath":"posts/2023/02/2023-02-26-transformer-quicktour.md","lastUpdated":1718173059000}'),n={name:"posts/2023/02/2023-02-26-transformer-quicktour.md"},e=t(`<p>ä½¿ç”¨ Notebook å®‰è£…ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> transformers</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> datasets</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">å®‰è£…</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> torch</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> torch</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># æˆ–è€…</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> tensorflow</span></span></code></pre></div><h2 id="pipeline" tabindex="-1">Pipeline <a class="header-anchor" href="#pipeline" aria-label="Permalink to &quot;Pipeline&quot;">â€‹</a></h2><p><code>pipeline()</code> æ˜¯ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹è¿›è¡Œæ¨ç†çš„æœ€ç®€å•ã€æœ€å¿«çš„æ–¹æ³•ã€‚ æ‚¨å¯ä»¥å°†å¼€ç®±å³ç”¨çš„ <code>pipeline()</code> ç”¨äºè·¨ä¸åŒæ¨¡å¼çš„è®¸å¤šä»»åŠ¡ï¼Œå…¶ä¸­ä¸€äº›ä»»åŠ¡å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p><table tabindex="0"><thead><tr><th>ä»»åŠ¡</th><th>Task</th><th>æè¿°</th><th>å½¢æ€</th><th>Modality</th><th>Pipeline identifier</th></tr></thead><tbody><tr><td>æ–‡æœ¬åˆ†ç±»</td><td>Text classification</td><td>ä¸ºç»™å®šçš„æ–‡æœ¬åºåˆ—åˆ†é…æ ‡ç­¾</td><td>è‡ªç„¶è¯­è¨€å¤„ç†</td><td>NLP</td><td>pipeline(task=â€œsentiment-analysisâ€)</td></tr><tr><td>æ–‡æœ¬ç”Ÿæˆ</td><td>Text generation</td><td>åœ¨å‡ºç°æç¤ºçš„æƒ…å†µä¸‹ç”Ÿæˆæ–‡æœ¬</td><td>è‡ªç„¶è¯­è¨€å¤„ç†</td><td>NLP</td><td>pipeline(task=â€œtext-generationâ€)</td></tr><tr><td>ç»¼è¿°</td><td>Summarization</td><td>ç”Ÿæˆæ–‡æœ¬æˆ–æ–‡æ¡£åºåˆ—çš„æ‘˜è¦</td><td>è‡ªç„¶è¯­è¨€å¤„ç†</td><td>NLP</td><td>pipeline(task=â€œsummarizationâ€)</td></tr><tr><td>å›¾åƒåˆ†ç±»</td><td>Image classification</td><td>ä¸ºå›¾åƒåˆ†é…æ ‡ç­¾</td><td>è®¡ç®—æœºè§†è§‰</td><td>Computer vision</td><td>pipeline(task=â€œimage-classificationâ€)</td></tr><tr><td>å›¾åƒåˆ†å‰²</td><td>Image segmentation</td><td>ä¸ºå›¾åƒçš„æ¯ä¸ªåƒç´ åˆ†é…æ ‡ç­¾ï¼ˆæ”¯æŒè¯­ä¹‰ã€å…¨æ™¯å’Œå®ä¾‹åˆ†å‰²ï¼‰</td><td>è®¡ç®—æœºè§†è§‰</td><td>Computer vision</td><td>pipeline(task=â€œimage-segmentationâ€)</td></tr><tr><td>ç‰©ä½“æ£€æµ‹</td><td>Object detection</td><td>é¢„æµ‹å›¾åƒä¸­å¯¹è±¡çš„è¾¹ç•Œæ¡†å’Œç±»åˆ«</td><td>è®¡ç®—æœºè§†è§‰</td><td>Computer vision</td><td>pipeline(task=â€œobject-detectionâ€)</td></tr><tr><td>éŸ³é¢‘åˆ†ç±»</td><td>Audio classification</td><td>ä¸ºæŸäº›éŸ³é¢‘æ•°æ®åˆ†é…æ ‡ç­¾</td><td>éŸ³é¢‘</td><td>Audio</td><td>pipeline(task=â€œaudio-classificationâ€)</td></tr><tr><td>è‡ªåŠ¨è¯­éŸ³è¯†åˆ«</td><td>Automatic speech recognition</td><td>å°†è¯­éŸ³è½¬å½•ä¸ºæ–‡æœ¬</td><td>éŸ³é¢‘</td><td>Audio</td><td>pipeline(task=â€œautomatic-speech-recognitionâ€)</td></tr><tr><td>è§†è§‰é—®ç­”</td><td>Visual question answering</td><td>å›ç­”æœ‰å…³å›¾åƒçš„é—®é¢˜ï¼Œç»™å®šå›¾åƒå’Œé—®é¢˜</td><td>æ¨¡ æ€</td><td>Multimodal</td><td>pipeline(task=â€œvqaâ€)</td></tr><tr><td>æ–‡æ¡£é—®ç­”</td><td>Document question answering</td><td>åœ¨ç»™å®šå›¾åƒå’Œé—®é¢˜çš„æƒ…å†µä¸‹å›ç­”æœ‰å…³æ–‡æ¡£çš„é—®é¢˜</td><td>æ¨¡ æ€</td><td>Multimodal</td><td>pipeline(task=â€œdocument-question-answeringâ€)</td></tr><tr><td>å›¾ç‰‡è¯´æ˜</td><td>Image captioning</td><td>ä¸ºç»™å®šå›¾åƒç”Ÿæˆæ ‡é¢˜</td><td>æ¨¡ æ€</td><td>Multimodal</td><td>pipeline(task=â€œimage-to-textâ€)</td></tr></tbody></table><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ª <code>pipeline()</code> çš„å®ä¾‹å¹¶æŒ‡å®šè¦ä½¿ç”¨å®ƒçš„ä»»åŠ¡ã€‚åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæ‚¨å°†ä½¿ç”¨ <code>pipeline()</code> è¿›è¡Œæƒ…ç»ªåˆ†æä½œä¸ºç¤ºä¾‹ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> transformers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> pipeline</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">classifier </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> pipeline(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;sentiment-analysis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span></code></pre></div><p>è¾“å‡º</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">No</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> model</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> was</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> supplied,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> defaulted</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> distilbert-base-uncased-finetuned-sst-2-english</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> revision</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> af0f99b</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (https://huggingface.co/distilbert-base-uncased-finetuned-sst-2-english).</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Using</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pipeline</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> without</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> specifying</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> model</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> revision</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> production</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> recommended.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Downloading</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (â€¦)lve/main/config.json: 100%</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">629/629</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">26.3kB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Downloading</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pytorch_model.bin:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 100%</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">268M/268M</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:01&lt;00:00, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">250MB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Downloading</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (â€¦)okenizer_config.json: 100%</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">48.0/48.0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">1.81kB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Downloading</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (â€¦)solve/main/vocab.txt: 100%</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">232k/232k</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">6.74MB/s]</span></span></code></pre></div><p><code>pipeline()</code> ä¸‹è½½å¹¶ç¼“å­˜é»˜è®¤çš„é¢„è®­ç»ƒæ¨¡å‹å’Œåˆ†è¯å™¨ï¼Œç”¨äºæƒ…ç»ªåˆ†æã€‚ç°åœ¨ï¼Œæ‚¨å¯ä»¥åœ¨ç›®æ ‡æ–‡æœ¬ä¸Šä½¿ç”¨ï¼šclassifier</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">classifier(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;We are very happy to show you the ğŸ¤— Transformers library.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span></code></pre></div><p>è¾“å‡º</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[{</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;label&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;POSITIVE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;score&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0.9997795224189758</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}]</span></span></code></pre></div><p>å¦‚æœæ‚¨æœ‰å¤šä¸ªè¾“å…¥ï¼Œè¯·å°†è¾“å…¥ä½œä¸ºåˆ—è¡¨ä¼ é€’ç»™ <code>pipeline()</code> ä»¥è¿”å›å­—å…¸åˆ—è¡¨ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">results </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> classifier([</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;We are very happy to show you the ğŸ¤— Transformers library.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;We hope you don&#39;t hate it.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">])</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> results:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;label: </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">result[</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;label&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">, with score: </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">{</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">round</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(result[</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;score&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">], </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span></code></pre></div><p>è¾“å‡º</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">label:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> POSITIVE,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> score:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.9998</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">label:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> NEGATIVE,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> score:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.5309</span></span></code></pre></div><p><code>pipeline()</code> è¿˜å¯ä»¥ä¸ºä»»ä½•ä½ å–œæ¬¢çš„ä»»åŠ¡è¿­ä»£æ•´ä¸ªæ•°æ®é›†ã€‚å¯¹äºæ­¤ç¤ºä¾‹ï¼Œè®©æˆ‘ä»¬é€‰æ‹©è‡ªåŠ¨è¯­éŸ³è¯†åˆ«ä½œä¸ºæˆ‘ä»¬çš„ä»»åŠ¡ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> torch</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> transformers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> pipeline</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">speech_recognizer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> pipeline(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;automatic-speech-recognition&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;facebook/wav2vec2-base-960h&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span></code></pre></div><p>è¾“å‡º</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Downloading</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (â€¦)lve/main/config.json: 100%</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">1.60k/1.60k</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">41.2kB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Downloading</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pytorch_model.bin:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 100%</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">378M/378M</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:04&lt;00:00, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">85.0MB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Some</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> weights</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Wav2Vec2ForCTC</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> were</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> initialized</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> model</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> checkpoint</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> at</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> facebook/wav2vec2-base-960h</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> are</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> newly</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> initialized:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;wav2vec2.masked_spec_embed&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">You</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> should</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> probably</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> TRAIN</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> this</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> model</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> down-stream</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> task</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> be</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> able</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> use</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> it</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> predictions</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> inference.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Downloading</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (â€¦)okenizer_config.json: 100%</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">163/163</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">5.82kB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Downloading</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (â€¦)olve/main/vocab.json: 100%</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">291/291</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">5.48kB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Downloading</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (â€¦)cial_tokens_map.json: 100%</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">85.0/85.0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">4.18kB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Downloading</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (â€¦)rocessor_config.json: 100%</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">159/159</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">4.96kB/s]</span></span></code></pre></div><p>åŠ è½½è¦è¿­ä»£çš„éŸ³é¢‘æ•°æ®é›†ï¼ˆæœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ğŸ¤—æ•°æ®é›†å¿«é€Ÿå…¥é—¨ï¼‰ã€‚ä¾‹å¦‚ï¼ŒåŠ è½½ MInDS-14 æ•°æ®é›†ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> datasets </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> load_dataset, Audio</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">dataset </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> load_dataset(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;PolyAI/minds14&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;en-US&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">split</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;train&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span></code></pre></div><p>è¾“å‡º</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Downloading</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> builder</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> script:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 100%</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">5.95k/5.95k</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">142kB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Downloading</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> readme:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 100%</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">5.29k/5.29k</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">136kB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Downloading</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> preparing</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dataset</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> minds14/en-US</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /root/.cache/huggingface/datasets/PolyAI___minds14/en-US/1.0.0/65c7e0f3be79e18a6ffaf879a083daf706312d421ac90d25718459cbf3c42696</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Downloading</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> data:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 100%</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">471M/471M</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:20&lt;00:00, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">24.1MB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Dataset</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> minds14</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> downloaded</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> prepared</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /root/.cache/huggingface/datasets/PolyAI___minds14/en-US/1.0.0/65c7e0f3be79e18a6ffaf879a083daf706312d421ac90d25718459cbf3c42696.</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Subsequent</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> calls</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> will</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> reuse</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> this</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> data.</span></span></code></pre></div><p>æ‚¨éœ€è¦ç¡®ä¿æ•°æ®é›†çš„é‡‡æ ·ç‡ä¸é‡‡æ ·åŒ¹é… Rate Facebook/WAV2Vec2-base-960Hæ¥å—è¿‡ä»¥ä¸‹æ–¹é¢çš„åŸ¹è®­ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">dataset </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> dataset.cast_column(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;audio&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, Audio(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">sampling_rate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">speech_recognizer.feature_extractor.sampling_rate))</span></span></code></pre></div><p>è°ƒç”¨åˆ—æ—¶ï¼Œä¼šè‡ªåŠ¨åŠ è½½å’Œé‡æ–°é‡‡æ ·éŸ³é¢‘æ–‡ä»¶ã€‚ ä»å‰ 4 ä¸ªæ ·æœ¬ä¸­æå–åŸå§‹æ³¢å½¢æ•°ç»„ï¼Œå¹¶å°†å…¶ä½œä¸ºåˆ—è¡¨ä¼ é€’ç»™ç®¡é“ï¼š&quot;audio&quot;</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> speech_recognizer(dataset[:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">][</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;audio&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">])</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">([d[</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> d </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> result])</span></span></code></pre></div><p>è¾“å‡º</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;I WOULD LIKE TO SET UP A JOINT ACCOUNT WITH MY PARTNER HOW DO I PROCEED WITH DOING THAT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;FONDERING HOW I&#39;D SET UP A JOIN TO HELL T WITH MY WIFE AND WHERE THE AP MIGHT BE&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;I I&#39;D LIKE TOY SET UP A JOINT ACCOUNT WITH MY PARTNER I&#39;M NOT SEEING THE OPTION TO DO IT ON THE APSO I CALLED IN TO GET SOME HELP CAN I JUST DO IT OVER THE PHONE WITH YOU AND GIVE YOU THE INFORMATION OR SHOULD I DO IT IN THE AP AN I&#39;M MISSING SOMETHING UQUETTE HAD PREFERRED TO JUST DO IT OVER THE PHONE OF POSSIBLE THINGS&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;HOW DO I FURN A JOINA COUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span></code></pre></div><p>å¯¹äºè¾“å…¥è¾ƒå¤§çš„å¤§å‹æ•°æ®é›†ï¼ˆå¦‚è¯­éŸ³æˆ–è§†è§‰ï¼‰ï¼Œæ‚¨éœ€è¦ä¼ é€’ç”Ÿæˆå™¨è€Œä¸æ˜¯åˆ—è¡¨ä»¥åŠ è½½å†…å­˜ä¸­çš„æ‰€æœ‰è¾“å…¥ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ç®¡é“ API å‚è€ƒã€‚</p><h3 id="åœ¨ç®¡é“ä¸­ä½¿ç”¨å…¶ä»–æ¨¡å‹å’Œåˆ†è¯å™¨" tabindex="-1">åœ¨ç®¡é“ä¸­ä½¿ç”¨å…¶ä»–æ¨¡å‹å’Œåˆ†è¯å™¨ <a class="header-anchor" href="#åœ¨ç®¡é“ä¸­ä½¿ç”¨å…¶ä»–æ¨¡å‹å’Œåˆ†è¯å™¨" aria-label="Permalink to &quot;åœ¨ç®¡é“ä¸­ä½¿ç”¨å…¶ä»–æ¨¡å‹å’Œåˆ†è¯å™¨&quot;">â€‹</a></h3><p><code>pipeline()</code> å¯ä»¥å®¹çº³æ¥è‡ª Hub çš„ä»»ä½•æ¨¡å‹ï¼Œä»è€Œå¯ä»¥è½»æ¾åœ°ä½¿ <code>pipeline()</code> é€‚åº”å…¶ä»–ç”¨ä¾‹ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³è¦ä¸€ä¸ªèƒ½å¤Ÿå¤„ç†æ³•è¯­æ–‡æœ¬çš„æ¨¡å‹ï¼Œè¯·ä½¿ç”¨ Hub ä¸Šçš„æ ‡ç­¾ç­›é€‰å‡ºåˆé€‚çš„æ¨¡å‹ã€‚ é¡¶éƒ¨ç­›é€‰çš„ç»“æœè¿”å›ä¸€ä¸ªå¤šè¯­è¨€ BERT æ¨¡å‹ï¼Œè¯¥æ¨¡å‹é’ˆå¯¹å¯ç”¨äºæ³•è¯­æ–‡æœ¬çš„æƒ…ç»ªåˆ†æè¿›è¡Œäº†å¾®è°ƒï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">model_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;nlptown/bert-base-multilingual-uncased-sentiment&quot;</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">pytorch</p><p>ä½¿ç”¨ <code>AutoModelForSequenceClassification</code> å’Œ <code>AutoTokenizer</code> åŠ è½½é¢„è®­ç»ƒæ¨¡å‹åŠå…¶å…³è”çš„åˆ†è¯å™¨ï¼ˆä¸‹ä¸€èŠ‚å°†è¯¦ç»†ä»‹ç» <code>AutoClass</code>ï¼‰ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> transformers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AutoTokenizer, AutoModelForSequenceClassification</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AutoModelForSequenceClassification.from_pretrained(model_name)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">tokenizer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AutoTokenizer.from_pretrained(model_name)</span></span></code></pre></div><p>è¾“å‡º</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Downloading</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (â€¦)lve/main/config.json: 100%</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">953/953</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">15.0kB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Downloading</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pytorch_model.bin:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 100%</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">669M/669M</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:08&lt;00:00, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">90.9MB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Downloading</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (â€¦)okenizer_config.json: 100%</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">39.0/39.0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">1.71kB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Downloading</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (â€¦)solve/main/vocab.txt: 100%</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">872k/872k</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">1.25MB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Downloading</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (â€¦)cial_tokens_map.json: 100%</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">112/112</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">4.04kB/s]</span></span></code></pre></div></div><div class="tip custom-block"><p class="custom-block-title">tensorflow</p><p>ä½¿ç”¨ <code>TFAutoModelForSequenceClassification</code> å’Œ <code>AutoTokenizer</code> åŠ è½½é¢„è®­ç»ƒæ¨¡å‹åŠå…¶å…³è”çš„åˆ†è¯å™¨ï¼ˆä¸‹ä¸€èŠ‚å°†è¯¦ç»†ä»‹ç» <code>TFAutoClass</code>ï¼‰ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> transformers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AutoTokenizer, TFAutoModelForSequenceClassification</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> TFAutoModelForSequenceClassification.from_pretrained(model_name)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">tokenizer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AutoTokenizer.from_pretrained(model_name)</span></span></code></pre></div></div><p>åœ¨ <code>pipeline()</code> ä¸­æŒ‡å®šæ¨¡å‹å’Œåˆ†è¯å™¨ï¼Œç°åœ¨æ‚¨å¯ä»¥åº”ç”¨ classifier åœ¨æ³•è¯­æ–‡æœ¬ä¸Šï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">classifier </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> pipeline(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;sentiment-analysis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">model, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">tokenizer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">tokenizer)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">classifier(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;Nous sommes trÃ¨s heureux de vous prÃ©senter la bibliothÃ¨que ğŸ¤— Transformers.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span></code></pre></div><p>è¾“å‡º</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[{</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;label&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;5 stars&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;score&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0.7272651791572571</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}]</span></span></code></pre></div><p>å¦‚æœæ‰¾ä¸åˆ°ç”¨ä¾‹çš„æ¨¡å‹ï¼Œåˆ™éœ€è¦å¯¹æ•°æ®è¿›è¡Œå¾®è°ƒé¢„è®­ç»ƒæ¨¡å‹ã€‚æŸ¥çœ‹æˆ‘ä»¬çš„ <a href="https://huggingface.co/docs/transformers/training" target="_blank" rel="noreferrer">å¾®è°ƒæ•™ç¨‹</a>ä»¥äº†è§£å¦‚ä½•æ“ä½œã€‚ æœ€åï¼Œåœ¨å¾®è°ƒé¢„è®­ç»ƒæ¨¡å‹åï¼Œè¯·è€ƒè™‘åœ¨ Hub ä¸Šä¸ç¤¾åŒºå…±äº«æ¨¡å‹ï¼Œä»¥ä½¿æ¯ä¸ªäººçš„æœºå™¨å­¦ä¹ æ°‘ä¸»åŒ–ï¼ğŸ¤—</p><h2 id="autoclass" tabindex="-1">AutoClass <a class="header-anchor" href="#autoclass" aria-label="Permalink to &quot;AutoClass&quot;">â€‹</a></h2><p>åœ¨åå°ï¼Œ<code>AutoModelForSequenceClassification</code> å’Œ <code>AutoTokenizer</code> ç±»ååŒå·¥ä½œï¼Œ ä¸ºæ‚¨ä¸Šé¢ä½¿ç”¨çš„ <code>pipeline()</code> æä¾›æ”¯æŒã€‚ <code>AutoClass</code> æ˜¯ä¸€ç§å¿«æ·æ–¹å¼ï¼Œå¯è‡ªåŠ¨ä»é¢„è®­ç»ƒæ¨¡å‹çš„åç§°æˆ–è·¯å¾„ä¸­æ£€ç´¢å…¶ä½“ç³»ç»“æ„ã€‚ æ‚¨åªéœ€è¦ä¸ºæ‚¨çš„ä»»åŠ¡é€‰æ‹©åˆé€‚çš„ AutoClass åŠå…¶å…³è”çš„é¢„å¤„ç†ç±»ã€‚</p><p>è®©æˆ‘ä»¬å›åˆ°ä¸Šä¸€èŠ‚ä¸­çš„ç¤ºä¾‹ï¼Œçœ‹çœ‹å¦‚ä½•ä½¿ç”¨ AutoClass æ¥å¤åˆ¶ <code>pipeline()</code> çš„ç»“æœã€‚</p><h3 id="autotokenizer" tabindex="-1">AutoTokenizer <a class="header-anchor" href="#autotokenizer" aria-label="Permalink to &quot;AutoTokenizer&quot;">â€‹</a></h3><p>åˆ†è¯å™¨è´Ÿè´£å°†æ–‡æœ¬é¢„å¤„ç†ä¸ºæ•°å­—æ•°ç»„ä½œä¸ºæ¨¡å‹çš„è¾“å…¥ã€‚ æœ‰å¤šç§è§„åˆ™æ§åˆ¶ç€æ ‡è®°åŒ–è¿‡ç¨‹ï¼ŒåŒ…æ‹¬å¦‚ä½•æ‹†åˆ†å•è¯ä»¥åŠåº”åœ¨ä»€ä¹ˆçº§åˆ«æ‹†åˆ†å•è¯ï¼ˆåœ¨åˆ†è¯å™¨æ‘˜è¦ä¸­äº†è§£æœ‰å…³æ ‡è®°åŒ–çš„æ›´å¤šä¿¡æ¯ï¼‰ã€‚ è¦è®°ä½çš„æœ€é‡è¦çš„äº‹æƒ…æ˜¯ï¼Œæ‚¨éœ€è¦å®ä¾‹åŒ–å…·æœ‰ç›¸åŒæ¨¡å‹åç§°çš„åˆ†è¯å™¨ï¼Œä»¥ç¡®ä¿æ‚¨ä½¿ç”¨ä¸æ¨¡å‹é¢„å…ˆè®­ç»ƒçš„ç›¸åŒåˆ†è¯åŒ–è§„åˆ™ã€‚</p><p>ä½¿ç”¨è‡ªåŠ¨åˆ†è¯å™¨åŠ è½½åˆ†è¯å™¨ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> transformers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AutoTokenizer</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">model_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;nlptown/bert-base-multilingual-uncased-sentiment&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">tokenizer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AutoTokenizer.from_pretrained(model_name)</span></span></code></pre></div><p>å°†æ–‡æœ¬ä¼ é€’ç»™åˆ†è¯å™¨ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">encoding </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> tokenizer(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;We are very happy to show you the ğŸ¤— Transformers library.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(encoding)</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;input_ids&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [101, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">11312,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 10320,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 12495,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 19308,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 10114,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 11391,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 10855,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 10103,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 100,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 58263,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 13299,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 119,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 102],</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;token_type_ids&#39;:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [0, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">0,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 0,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 0,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 0,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 0,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 0,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 0,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 0,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 0,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 0,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 0,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 0,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 0],</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;attention_mask&#39;:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [1, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">1,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 1,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 1,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 1,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 1,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 1,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 1,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 1,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 1,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 1,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 1,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 1,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 1]}</span></span></code></pre></div><p>åˆ†è¯å™¨è¿”å›ä¸€ä¸ªå­—å…¸ï¼Œå…¶ä¸­åŒ…å«ï¼š</p><ul><li><code>input_ids</code>ï¼štoken çš„æ•°å­—è¡¨ç¤ºã€‚</li><li><code>attention_mask</code>ï¼šæŒ‡ç¤ºåº”å…³æ³¨å“ªäº› tokenã€‚ åˆ†è¯å™¨è¿˜å¯ä»¥æ¥å—è¾“å…¥åˆ—è¡¨ï¼Œå¹¶å¡«å……å’Œæˆªæ–­æ–‡æœ¬ä»¥è¿”å›å…·æœ‰ç»Ÿä¸€é•¿åº¦çš„æ‰¹å¤„ç†ï¼š</li></ul><div class="tip custom-block"><p class="custom-block-title">pytorch</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">pt_batch </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> tokenizer(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    [</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;We are very happy to show you the ğŸ¤— Transformers library.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;We hope you don&#39;t hate it.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">    padding</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">    truncation</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">    max_length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">512</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">    return_tensors</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;pt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span></code></pre></div></div><div class="tip custom-block"><p class="custom-block-title">tensorflow</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">tf_batch </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> tokenizer(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    [</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;We are very happy to show you the ğŸ¤— Transformers library.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;We hope you don&#39;t hate it.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">    padding</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">    truncation</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">    max_length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">512</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">    return_tensors</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;tf&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span></code></pre></div></div><h3 id="è‡ªåŠ¨å»ºæ¨¡-automodel" tabindex="-1">è‡ªåŠ¨å»ºæ¨¡ AutoModel <a class="header-anchor" href="#è‡ªåŠ¨å»ºæ¨¡-automodel" aria-label="Permalink to &quot;è‡ªåŠ¨å»ºæ¨¡ AutoModel&quot;">â€‹</a></h3><div class="tip custom-block"><p class="custom-block-title">pytorch</p><p>ğŸ¤— è½¬æ¢å™¨æä¾›äº†ä¸€ç§ç®€å•è€Œç»Ÿä¸€çš„æ–¹å¼æ¥åŠ è½½é¢„è®­ç»ƒå®ä¾‹ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥åƒåŠ è½½è‡ªåŠ¨æ ‡è®°å™¨ä¸€æ ·åŠ è½½è‡ªåŠ¨æ¨¡å‹ã€‚å”¯ä¸€çš„åŒºåˆ«æ˜¯ä¸ºä»»åŠ¡é€‰æ‹©æ­£ç¡®çš„è‡ªåŠ¨æ¨¡å‹ã€‚å¯¹äºæ–‡æœ¬ï¼ˆæˆ–åºåˆ—ï¼‰åˆ†ç±»ï¼Œåº”åŠ è½½ AutoModelForSequenceClassificationï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> transformers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AutoModelForSequenceClassification</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">model_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;nlptown/bert-base-multilingual-uncased-sentiment&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">pt_model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AutoModelForSequenceClassification.from_pretrained(model_name)</span></span></code></pre></div></div><h3 id="ä¿å­˜æ¨¡å‹" tabindex="-1">ä¿å­˜æ¨¡å‹ <a class="header-anchor" href="#ä¿å­˜æ¨¡å‹" aria-label="Permalink to &quot;ä¿å­˜æ¨¡å‹&quot;">â€‹</a></h3><div class="tip custom-block"><p class="custom-block-title">python</p><p>å¯¹æ¨¡å‹è¿›è¡Œå¾®è°ƒåï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ PreTrainedModel.save_pretrained() ä½¿ç”¨å…¶åˆ†è¯å™¨ä¿å­˜å®ƒï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">pt_save_directory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;./pt_save_pretrained&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">tokenizer.save_pretrained(pt_save_directory)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">pt_model.save_pretrained(pt_save_directory)</span></span></code></pre></div><p>å½“æ‚¨å‡†å¤‡å¥½å†æ¬¡ä½¿ç”¨è¯¥æ¨¡å‹æ—¶ï¼Œè¯·ä½¿ç”¨ PreTrainedModel.from_pretrained() é‡æ–°åŠ è½½å®ƒï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">pt_model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AutoModelForSequenceClassification.from_pretrained(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;./pt_save_pretrained&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span></code></pre></div></div><p>ä¸€ä¸ªç‰¹åˆ«é…·ğŸ¤—çš„TransformersåŠŸèƒ½æ˜¯èƒ½å¤Ÿä¿å­˜æ¨¡å‹å¹¶å°†å…¶é‡æ–°åŠ è½½ä¸ºPyTorchæˆ–TensorFlowæ¨¡å‹ã€‚ <code>from_ptfrom_tf</code> å‚æ•°å¯ä»¥å°†æ¨¡å‹ä»ä¸€ä¸ªæ¡†æ¶è½¬æ¢ä¸ºå¦ä¸€ä¸ªæ¡†æ¶ï¼š</p><div class="tip custom-block"><p class="custom-block-title">pytorch</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> transformers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AutoModel</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">tokenizer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AutoTokenizer.from_pretrained(tf_save_directory)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">pt_model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AutoModelForSequenceClassification.from_pretrained(tf_save_directory, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">from_tf</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span></code></pre></div></div><h2 id="è‡ªå®šä¹‰æ¨¡å‹æ„å»º" tabindex="-1">è‡ªå®šä¹‰æ¨¡å‹æ„å»º <a class="header-anchor" href="#è‡ªå®šä¹‰æ¨¡å‹æ„å»º" aria-label="Permalink to &quot;è‡ªå®šä¹‰æ¨¡å‹æ„å»º&quot;">â€‹</a></h2><p>æ‚¨å¯ä»¥ä¿®æ”¹æ¨¡å‹çš„é…ç½®ç±»ä»¥æ›´æ”¹æ¨¡å‹çš„æ„å»ºæ–¹å¼ã€‚è¯¥é…ç½®æŒ‡å®šæ¨¡å‹çš„å±æ€§ï¼Œä¾‹å¦‚éšè—å±‚æˆ–æ³¨æ„å¤´çš„æ•°é‡ã€‚ ä»è‡ªå®šä¹‰é…ç½®ç±»åˆå§‹åŒ–æ¨¡å‹æ—¶ï¼Œè¯·ä»å¤´å¼€å§‹ã€‚æ¨¡å‹å±æ€§æ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œæ‚¨éœ€è¦å…ˆè®­ç»ƒæ¨¡å‹ï¼Œç„¶åæ‰èƒ½ä½¿ç”¨å®ƒæ¥è·å¾—æœ‰æ„ä¹‰çš„ç»“æœã€‚</p><p>é¦–å…ˆå¯¼å…¥è‡ªåŠ¨é…ç½®ï¼Œç„¶ååŠ è½½è¦ä¿®æ”¹çš„é¢„è®­ç»ƒæ¨¡å‹ã€‚åœ¨ AutoConfig.from_pretrained() ä¸­ï¼Œ æ‚¨å¯ä»¥æŒ‡å®šè¦æ›´æ”¹çš„å±æ€§ï¼Œä¾‹å¦‚ attention heads çš„æ•°é‡ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> transformers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AutoConfig</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">my_config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AutoConfig.from_pretrained(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;distilbert-base-uncased&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">n_heads</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">12</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">pytorch</p><p>ä½¿ç”¨ AutoModel.from_config() ä»è‡ªå®šä¹‰é…ç½®åˆ›å»ºæ¨¡å‹ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> transformers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AutoModel</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">my_model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AutoModel.from_config(my_config)</span></span></code></pre></div></div><p>æœ‰å…³æ„å»ºè‡ªå®šä¹‰é…ç½®çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹åˆ›å»º<a href="https://huggingface.co/docs/transformers/create_a_model" target="_blank" rel="noreferrer">è‡ªå®šä¹‰ä½“ç³»ç»“æ„æŒ‡å—</a>ã€‚</p><h2 id="è®­ç»ƒå™¨-pytorch-ä¼˜åŒ–çš„è®­ç»ƒå¾ªç¯" tabindex="-1">è®­ç»ƒå™¨ - PyTorch ä¼˜åŒ–çš„è®­ç»ƒå¾ªç¯ <a class="header-anchor" href="#è®­ç»ƒå™¨-pytorch-ä¼˜åŒ–çš„è®­ç»ƒå¾ªç¯" aria-label="Permalink to &quot;è®­ç»ƒå™¨ - PyTorch ä¼˜åŒ–çš„è®­ç»ƒå¾ªç¯&quot;">â€‹</a></h2><p>æ‰€æœ‰æ¨¡å‹éƒ½æ˜¯æ ‡å‡†çš„<a href="https://pytorch.org/docs/stable/nn.html#torch.nn.Module" target="_blank" rel="noreferrer"><code>torch.nn.Module</code></a>ï¼Œ å› æ­¤æ‚¨å¯ä»¥åœ¨ä»»ä½•å…¸å‹çš„è®­ç»ƒå¾ªç¯ä¸­ä½¿ç”¨å®ƒä»¬ã€‚è™½ç„¶æ‚¨å¯ä»¥ç¼–å†™è‡ªå·±çš„è®­ç»ƒå¾ªç¯ï¼Œ ğŸ¤—ä½† Transformers ä¸º PyTorch æä¾›äº†ä¸€ä¸ªè®­ç»ƒå™¨ç±»ï¼Œå…¶ä¸­åŒ…å«åŸºæœ¬çš„è®­ç»ƒå¾ªç¯ï¼Œ å¹¶ä¸ºåˆ†å¸ƒå¼<a href="https://huggingface.co/docs/transformers/v4.28.1/en/main_classes/trainer#transformers.Trainer" target="_blank" rel="noreferrer">è®­ç»ƒ</a>ã€ æ··åˆç²¾åº¦ç­‰åŠŸèƒ½æ·»åŠ äº†å…¶ä»–åŠŸèƒ½ã€‚</p><p>æ ¹æ®æ‚¨çš„ä»»åŠ¡ï¼Œ æ‚¨é€šå¸¸ä¼šå°†ä»¥ä¸‹å‚æ•°ä¼ é€’ç»™<a href="https://huggingface.co/docs/transformers/v4.28.1/en/main_classes/trainer#transformers.Trainer" target="_blank" rel="noreferrer">è®­ç»ƒå™¨</a>ï¼š</p><ol><li><p><a href="https://huggingface.co/docs/transformers/v4.28.1/en/main_classes/model#transformers.PreTrainedModel" target="_blank" rel="noreferrer">A PreTrainedModel</a> æˆ– <a href="https://pytorch.org/docs/stable/nn.html#torch.nn.Module" target="_blank" rel="noreferrer"><code>torch.nn.Module</code></a>ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;&gt;&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> transformers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AutoModelForSequenceClassification</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AutoModelForSequenceClassification.from_pretrained(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;distilbert-base-uncased&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span></code></pre></div></li><li><p>è®­ç»ƒå‚æ•°åŒ…å«å¯ä»¥æ›´æ”¹çš„æ¨¡å‹è¶…å‚æ•°ï¼Œä¾‹å¦‚å­¦ä¹ ç‡ã€æ‰¹é‡å¤§å°å’Œè¦<a href="https://huggingface.co/docs/transformers/v4.28.1/en/main_classes/trainer#transformers.TrainingArguments" target="_blank" rel="noreferrer">è®­ç»ƒ</a>çš„å‘¨æœŸæ•°ã€‚å¦‚æœæœªæŒ‡å®šä»»ä½•è®­ç»ƒå‚æ•°ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;&gt;&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> transformers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> TrainingArguments</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> training_args </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> TrainingArguments(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">     output_dir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;path/to/save/folder/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">     learning_rate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2e-5</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">     per_device_train_batch_size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">     per_device_eval_batch_size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">     num_train_epochs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> )</span></span></code></pre></div></li><li><p>é¢„å¤„ç†ç±»ï¼Œå¦‚åˆ†è¯å™¨ã€å›¾åƒå¤„ç†å™¨ã€ç‰¹å¾æå–å™¨æˆ–å¤„ç†å™¨ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;&gt;&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> transformers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AutoTokenizer</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> tokenizer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AutoTokenizer.from_pretrained(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;distilbert-base-uncased&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span></code></pre></div></li><li><p>åŠ è½½æ•°æ®é›†ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;&gt;&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> datasets </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> load_dataset</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> dataset </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> load_dataset(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;rotten_tomatoes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># doctest: +IGNORE_RESULT</span></span></code></pre></div></li><li><p>åˆ›å»ºä¸€ä¸ªå‡½æ•°æ¥æ ‡è®°æ•°æ®é›†ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;&gt;&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> tokenize_dataset</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(dataset):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">     return</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> tokenizer(dataset[</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">])</span></span></code></pre></div><p>ç„¶åç”¨<a href="https://huggingface.co/docs/datasets/v2.11.0/en/package_reference/main_classes#datasets.Dataset.map" target="_blank" rel="noreferrer">map</a>å°†å…¶åº”ç”¨äºæ•´ä¸ªæ•°æ®é›†ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> dataset </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> dataset.map(tokenize_dataset, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">batched</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span></code></pre></div></li><li><p><a href="https://huggingface.co/docs/transformers/v4.28.1/en/main_classes/data_collator#transformers.DataCollatorWithPadding" target="_blank" rel="noreferrer"> DataCollatorWithPadding</a> æ¥ä»æ•°æ®é›†åˆ›å»ºä¸€æ‰¹ç¤ºä¾‹ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;&gt;&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> transformers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DataCollatorWithPadding</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data_collator </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DataCollatorWithPadding(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">tokenizer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">tokenizer)</span></span></code></pre></div></li></ol><p>ç°åœ¨åœ¨<a href="https://huggingface.co/docs/transformers/v4.28.1/en/main_classes/trainer#transformers.Trainer" target="_blank" rel="noreferrer">Trainer</a>ä¸­æ”¶é›†æ‰€æœ‰è¿™äº›ç±»ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span>&gt;&gt;&gt; from transformers import Trainer</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&gt;&gt;&gt; trainer = Trainer(</span></span>
<span class="line"><span>     model=model,</span></span>
<span class="line"><span>     args=training_args,</span></span>
<span class="line"><span>     train_dataset=dataset[&quot;train&quot;],</span></span>
<span class="line"><span>     eval_dataset=dataset[&quot;test&quot;],</span></span>
<span class="line"><span>     tokenizer=tokenizer,</span></span>
<span class="line"><span>     data_collator=data_collator,</span></span>
<span class="line"><span> )  # doctest: +SKIP</span></span></code></pre></div><p>å‡†å¤‡å¥½åï¼Œè°ƒç”¨ <a href="https://huggingface.co/docs/transformers/v4.28.1/en/main_classes/trainer#transformers.Trainer.train" target="_blank" rel="noreferrer">train()</a> å¼€å§‹è®­ç»ƒï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span>&gt;&gt;&gt; trainer.train()</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>å¯¹äºä½¿ç”¨åºåˆ—åˆ°åºåˆ—æ¨¡å‹çš„ä»»åŠ¡ï¼ˆå¦‚ç¿»è¯‘æˆ–æ‘˜è¦ï¼‰ï¼Œ è¯·æ”¹ç”¨ <a href="https://huggingface.co/docs/transformers/v4.28.1/en/main_classes/trainer#transformers.Seq2SeqTrainer" target="_blank" rel="noreferrer">Seq2SeqTrainer</a> å’Œ <a href="https://huggingface.co/docs/transformers/v4.28.1/en/main_classes/trainer#transformers.Seq2SeqTrainingArguments" target="_blank" rel="noreferrer">Seq2SeqTrainingArguments</a> ç±»ã€‚</p></div><p>æ‚¨å¯ä»¥é€šè¿‡å¯¹ <a href="https://huggingface.co/docs/transformers/v4.28.1/en/main_classes/trainer#transformers.Trainer" target="_blank" rel="noreferrer">Trainer</a> ä¸­çš„æ–¹æ³•è¿›è¡Œå­ç±»åŒ–æ¥è‡ªå®šä¹‰è®­ç»ƒå¾ªç¯è¡Œä¸ºã€‚è¿™å…è®¸æ‚¨è‡ªå®šä¹‰æŸå¤±å‡½æ•°ã€ä¼˜åŒ–å™¨å’Œè°ƒåº¦ç¨‹åºç­‰åŠŸèƒ½ã€‚ æŸ¥çœ‹å¯ä»¥å­ç±»åŒ–çš„æ–¹æ³•çš„<a href="https://huggingface.co/docs/transformers/v4.28.1/en/main_classes/trainer#transformers.Trainer" target="_blank" rel="noreferrer">è®­ç»ƒå™¨</a>å‚è€ƒã€‚</p><p>è‡ªå®šä¹‰è®­ç»ƒå¾ªç¯çš„å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨<a href="https://huggingface.co/docs/transformers/main_classes/callbacks" target="_blank" rel="noreferrer">å›è°ƒ</a>ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨å›è°ƒä¸å…¶ä»–åº“é›†æˆï¼Œå¹¶æ£€æŸ¥è®­ç»ƒå¾ªç¯ä»¥æŠ¥å‘Šè¿›åº¦æˆ–æå‰åœæ­¢è®­ç»ƒã€‚å›è°ƒä¸ä¼šä¿®æ”¹è®­ç»ƒå¾ªç¯æœ¬èº«ä¸­çš„ä»»ä½•å†…å®¹ã€‚ è¦è‡ªå®šä¹‰ç±»ä¼¼æŸå¤±å‡½æ•°çš„å†…å®¹ï¼Œæ‚¨éœ€è¦æ”¹ä¸ºå¯¹<a href="https://huggingface.co/docs/transformers/v4.28.1/en/main_classes/trainer#transformers.Trainer" target="_blank" rel="noreferrer">è®­ç»ƒå™¨</a>è¿›è¡Œå­ç±»åŒ–ã€‚</p><hr><ul><li><a href="https://huggingface.co/docs/transformers/quicktour" target="_blank" rel="noreferrer">https://huggingface.co/docs/transformers/quicktour</a></li></ul>`,81),h=[e];function l(p,k,d,r,o,g){return a(),i("div",null,h)}const y=s(n,[["render",l]]);export{c as __pageData,y as default};
