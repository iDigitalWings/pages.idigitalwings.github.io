import{_ as i,a,af as l,o as t}from"./chunks/framework.C87LdZyP.js";const h="/assets/NameNode-web-interface.DVFK1nDM.png",n="/assets/ResourceManager-web-interface.ClK4AL83.png",c=JSON.parse('{"title":"Hadoop install","description":"","frontmatter":{"title":"Hadoop install","date":"2017-06-11T00:00:00.000Z","tags":["bigdata","hadoop"]},"headers":[],"relativePath":"posts/2017/06/2017-06-11-hadoop-install.md","filePath":"posts/2017/06/2017-06-11-hadoop-install.md","lastUpdated":1718193786000}'),p={name:"posts/2017/06/2017-06-11-hadoop-install.md"};function e(k,s,d,r,g,o){return t(),a("div",null,s[0]||(s[0]=[l(`<p>首先去<a href="http://hadoop.apache.org/releases.html" target="_blank" rel="noreferrer">官网</a>下载hadoop.本文书写时最新版为<code>3.0.0-alpha3</code>， 最新稳定版为<code>2.8.0</code>。</p><p>为了测试，我们只安装<a href="http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/SingleCluster.html" target="_blank" rel="noreferrer">单机版</a>的hadoop。</p><h2 id="环境" tabindex="-1">环境 <a class="header-anchor" href="#环境" aria-label="Permalink to &quot;环境&quot;">​</a></h2><ul><li>Linux Mint 17</li><li>JDK8</li><li>SSH</li></ul><h2 id="下载" tabindex="-1">下载 <a class="header-anchor" href="#下载" aria-label="Permalink to &quot;下载&quot;">​</a></h2><p><a href="http://www.apache.org/dyn/closer.cgi/hadoop/common/" target="_blank" rel="noreferrer">地址</a></p><h2 id="java-环境变量" tabindex="-1">Java 环境变量 <a class="header-anchor" href="#java-环境变量" aria-label="Permalink to &quot;Java 环境变量&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> JAVA_HOME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">/usr/java/latest</span></span></code></pre></div><h2 id="启动" tabindex="-1">启动 <a class="header-anchor" href="#启动" aria-label="Permalink to &quot;启动&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">bin/hadoop</span></span></code></pre></div><h2 id="单机版操作" tabindex="-1">单机版操作 <a class="header-anchor" href="#单机版操作" aria-label="Permalink to &quot;单机版操作&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> input</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> cp</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> etc/hadoop/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.xml</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> input</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/hadoop</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> jar</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> share/hadoop/mapreduce/hadoop-mapreduce-examples-3.0.0-alpha3.jar</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> input</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> output</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;dfs[a-z.]+&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> cat</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> output/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span></span></code></pre></div><h2 id="伪分布式操作" tabindex="-1">伪分布式操作 <a class="header-anchor" href="#伪分布式操作" aria-label="Permalink to &quot;伪分布式操作&quot;">​</a></h2><h3 id="配置" tabindex="-1">配置 <a class="header-anchor" href="#配置" aria-label="Permalink to &quot;配置&quot;">​</a></h3><p><code>etc/hadoop/core-site.xml</code></p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;fs.defaultFS&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;hdfs://localhost:9000&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span></code></pre></div><p><code>etc/hadoop/hdfs-site.xml</code></p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;dfs.replication&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;1&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span></code></pre></div><h3 id="ssh-免密" tabindex="-1">ssh 免密 <a class="header-anchor" href="#ssh-免密" aria-label="Permalink to &quot;ssh 免密&quot;">​</a></h3><p>安装，</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ssh</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pdsh</span></span></code></pre></div><p>测试，</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ssh</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> localhost</span></span></code></pre></div><p>如果需要输入密码，可以运行如下命令：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ssh-keygen</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> rsa</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -P</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ~/.ssh/id_rsa</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> cat</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ~/.ssh/id_rsa.pub</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ~/.ssh/authorized_keys</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0600</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ~/.ssh/authorized_keys</span></span></code></pre></div><h3 id="运行" tabindex="-1">运行 <a class="header-anchor" href="#运行" aria-label="Permalink to &quot;运行&quot;">​</a></h3><ol><li>格式化</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">bin/hdfs</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> namenode</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -format</span></span></code></pre></div><ol><li>启动<code>NameNode</code>和<code>DataNode</code>守护进程</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sbin/start-dfs.sh</span></span></code></pre></div><p>启动的时候报错：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">pdsh@alan:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> localhost:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> rcmd:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> socket:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Permission</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> denied</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Starting</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> datanodes</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">pdsh@alan:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> localhost:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> rcmd:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> socket:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Permission</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> denied</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Starting</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> secondary</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> namenodes</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [alan]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">pdsh@alan:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> alan:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> rcmd:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> socket:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Permission</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> denied</span></span></code></pre></div><p>编辑文件：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> vi</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /etc/pdsh/rcmd_default</span></span></code></pre></div><p>输入<code>ssh</code>敲回车保存。再次运行<code>start-dfs.sh</code>即可：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Starting</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> namenodes</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> on</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [localhost]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Starting</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> datanodes</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Starting</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> secondary</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> namenodes</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [alan]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">alan:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Warning:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Permanently</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> added</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;alan&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (ECDSA) to the list of known hosts.</span></span></code></pre></div><p>日志在<code>$HADOOP_LOG_DIR</code> 目录 (defaults to <code>$HADOOP_HOME/logs</code>)</p><ol><li>查看NameNode</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">http://127.0.0.1:9870/</span></span></code></pre></div><p><img src="`+h+`" alt=""></p><ol><li>创建目录</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/hdfs</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dfs</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /user</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/hdfs</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dfs</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /user/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">usernam</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span></span></code></pre></div><ol><li>拷贝文件到HDFS</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/hdfs</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dfs</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> input</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/hdfs</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dfs</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -put</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> etc/hadoop/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.xml</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> input</span></span></code></pre></div><ol><li>运行样例程序</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/hadoop</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> jar</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> share/hadoop/mapreduce/hadoop-mapreduce-examples-3.0.0-alpha3.jar</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> input</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> output</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;dfs[a-z.]+&#39;</span></span></code></pre></div><ol><li>拷贝output到本机，检查</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/hdfs</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dfs</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> output</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> output</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> cat</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> output/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span></span></code></pre></div><p>或者直接在hdfs上查看：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/hdfs</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dfs</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -cat</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> output/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span></span></code></pre></div><ol><li>关闭守护进程</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sbin/stop-dfs.sh</span></span></code></pre></div><h2 id="单节点yarn" tabindex="-1">单节点YARN <a class="header-anchor" href="#单节点yarn" aria-label="Permalink to &quot;单节点YARN&quot;">​</a></h2><ol><li><p>格式化并启动守护进程，然后创建目录</p></li><li><p>配置 <code>etc/hadoop/mapred-site.xml</code></p></li></ol><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;mapreduce.framework.name&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;yarn&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span></code></pre></div><p><code>etc/hadoop/yarn-site.xml</code></p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;yarn.nodemanager.aux-services&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;mapreduce_shuffle&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;yarn.nodemanager.env-whitelist&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span></span></code></pre></div><ol><li>启动Yarn</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sbin/start-yarn.sh</span></span></code></pre></div><p><img src="`+n+'" alt=""></p><ol><li>Resource Manager</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">http://127.0.0.1:8088/</span></span></code></pre></div><ol><li><p>执行程序</p></li><li><p>关闭</p></li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sbin/stop-yarn.sh</span></span></code></pre></div><hr><div style="text-align:center;color:#00000099;font-size:14px;">END</div>',66)]))}const y=i(p,[["render",e]]);export{c as __pageData,y as default};
