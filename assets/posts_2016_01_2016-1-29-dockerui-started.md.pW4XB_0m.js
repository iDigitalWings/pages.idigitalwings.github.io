import{_ as i,a,af as n,o as e}from"./chunks/framework.C87LdZyP.js";const c=JSON.parse('{"title":"DockerUI started","description":"","frontmatter":{"title":"DockerUI started","date":"2016-01-29T00:00:00.000Z","tags":["docker"]},"headers":[],"relativePath":"posts/2016/01/2016-1-29-dockerui-started.md","filePath":"posts/2016/01/2016-1-29-dockerui-started.md","lastUpdated":1718193786000}'),t={name:"posts/2016/01/2016-1-29-dockerui-started.md"};function p(h,s,l,k,r,d){return e(),a("div",null,s[0]||(s[0]=[n(`<p><a href="https://github.com/crosbymichael/dockerui" target="_blank" rel="noreferrer">dockerui</a>。一个docker的可视化工具，能对进行管理。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 9000:9000</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --privileged</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /var/run/docker.sock:/var/run/docker.sock</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dockerui/dockerui</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># Connect to a tcp socket:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 9000:9000</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --privileged</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dockerui/dockerui</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> http://127.0.0.1:2375</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># Expose DockerUI on 10.20.30.1:80</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 10.20.30.1:80:9000</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --privileged</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /var/run/docker.sock:/var/run/docker.sock</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dockerui/dockerui</span></span></code></pre></div><p>Open your browser to <code>http://&lt;dockerd host ip&gt;:9000</code></p><h2 id="nginx" tabindex="-1">nginx <a class="header-anchor" href="#nginx" aria-label="Permalink to &quot;nginx&quot;">​</a></h2><p>First add the upstream conf to your nginx configuration :</p><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">upstream</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> dockerui </span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> 172.17.42.1:9000;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>Then here the sample vhost configuration :</p><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">        listen </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">80</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">        server_name </span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">dockerui.example.com;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">        access_log </span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">/var/log/nginx/dockerui.access.log </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">main</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">        error_log </span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">/var/log/nginx/dockerui.error.log info;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">        location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">                #basic auth</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">                auth_basic </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">           &quot;Docker UI&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">                auth_basic_user_file </span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> /somewhere.htpasswd;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">                proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">http://dockerui;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">                #http 1.1 support...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">                proxy_http_version </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1.1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">                proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Connection </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">                proxy_redirect </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">    off</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">                proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  Host $host;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">                proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  X-Real-IP $remote_addr;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">                proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">                proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  X-Forwarded-Host $server_name;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">        root </span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">/home/johndoe/www/;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>Note the explicit proxy_http_version 1.1 and proxy_set_header Connection &quot;&quot;;. By default nginx use http 1.0. Without these settings, you get HTTP 500 errors.</p><hr><div style="text-align:center;color:#00000099;font-size:14px;">END</div>`,11)]))}const g=i(t,[["render",p]]);export{c as __pageData,g as default};
