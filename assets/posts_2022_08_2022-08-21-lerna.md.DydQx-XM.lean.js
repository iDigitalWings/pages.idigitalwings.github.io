import{_ as i,a,af as n,o as h}from"./chunks/framework.C87LdZyP.js";const l="/assets/rx-ui.DOaXgFfo.png",y=JSON.parse('{"title":"JavaScript Monorepos Tool: Lerna","description":"","frontmatter":{"title":"JavaScript Monorepos Tool: Lerna","date":"2022-08-21T00:00:00.000Z","tags":["javascript","lerna","npm","monorepos"],"category":["其它"]},"headers":[],"relativePath":"posts/2022/08/2022-08-21-lerna.md","filePath":"posts/2022/08/2022-08-21-lerna.md","lastUpdated":1718173059000}'),p={name:"posts/2022/08/2022-08-21-lerna.md"};function t(k,s,e,F,r,d){return h(),a("div",null,s[0]||(s[0]=[n(`<p>使用 demo 项目：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> https://github.com/lerna/getting-started-example.git</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> getting-started-example</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> checkout</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> prelerna</span></span></code></pre></div><p>目录结构如下：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">packages/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    header/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        src/</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">            ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        package.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        rollup.config.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        jest.config.js</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    footer/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        src/</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">            ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        package.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        rollup.config.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        jest.config.js</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    remixapp/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        app/</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">            ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        public/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        package.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        remix.config.js</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">package.json</span></span></code></pre></div><p>添加 lerna：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">volta</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> lerna</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> init</span></span></code></pre></div><p>或者使用npx：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> lerna@latest</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> init</span></span></code></pre></div><p>会生成 <code>lerna.json</code> 文件，并添加 lerna 配置到 <code>package.json</code> 文件:</p><p>package.json:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;root&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">  &quot;private&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">  &quot;devDependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">    &quot;lerna&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;^6.0.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">  &quot;workspaces&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    &quot;packages/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>lerna.json:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">  &quot;$schema&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;node_modules/lerna/schemas/lerna-schema.json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">  &quot;useWorkspaces&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">  &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;0.0.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><h2 id="可视化工作区" tabindex="-1">可视化工作区 <a class="header-anchor" href="#可视化工作区" aria-label="Permalink to &quot;可视化工作区&quot;">​</a></h2><p>使用 <code>nx</code> 工具，</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">nx</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> graph</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># or</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> nx</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> graph</span></span></code></pre></div><p><img src="`+l+`" alt=""></p><h2 id="bootstrapping-projects" tabindex="-1">Bootstrapping Projects <a class="header-anchor" href="#bootstrapping-projects" aria-label="Permalink to &quot;Bootstrapping Projects&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bootstrap</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># or</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bootstrap</span></span></code></pre></div><p>查看 <code>remixapp</code> 的 <code>package.json</code> 文件：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FF938A;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  ...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">  &quot;dependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">    &quot;@remix-run/node&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;^1.5.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">    &quot;@remix-run/react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;^1.5.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">    &quot;@remix-run/serve&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;^1.5.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">    &quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;^17.0.2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">    &quot;react-dom&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;^17.0.2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">    &quot;header&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">    &quot;footer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;*&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><h2 id="building-all-projects" tabindex="-1">Building All Projects <a class="header-anchor" href="#building-all-projects" aria-label="Permalink to &quot;Building All Projects&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> build</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># or</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> build</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">➜</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  ~</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> notice</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> cli</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> v6.0.0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    ✔</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  footer:build</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (2s)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    ✔</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  header:build</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (2s)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    ✔</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  remixapp:build</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (2s)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> —————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  Lerna</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (powered </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">by</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Nx</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)   Successfully ran target build </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">for</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> projects (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">3s</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span></code></pre></div><h2 id="caching" tabindex="-1">Caching <a class="header-anchor" href="#caching" aria-label="Permalink to &quot;Caching&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> add-caching</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># or</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> add-caching</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">➜</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  ~</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> add-caching</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> notice</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> cli</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> v6.0.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> info</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> add-caching</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Please</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> answer</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> following</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> questions</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> about</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> scripts</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> found</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> your</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> workspace</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> order</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> generate</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> task</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> runner</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> configuration</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Which of the following scripts need to be run in deterministic/topoglogical order</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">?</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Press</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">spac</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> select,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> toggle</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> all,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> invert</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> selection,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> and</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">ente</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> proceed</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ◯</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ◯</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> test</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">❯◉</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dev</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ◯</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> start</span></span></code></pre></div><p>选择需要的脚本。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">➜</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  ~</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> add-caching</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> notice</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> cli</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> v6.0.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> info</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> add-caching</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Please</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> answer</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> following</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> questions</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> about</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> scripts</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> found</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> your</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> workspace</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> order</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> generate</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> task</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> runner</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> configuration</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Which of the following scripts need to be run in deterministic/topoglogical order</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">?</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> build,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> test,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dev,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> start</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Which of the following scripts are cacheable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Produce</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> same</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> output</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> given</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> same</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> input,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> e.g.</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> build,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> test</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> lint</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> usually</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> are,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> serve</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> are</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> build,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> test,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dev,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> start</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Does the </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> script create any outputs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> If not, leave blank, otherwise provide a path relative to a project root (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">e.g.</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dist,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> lib,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> build,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> coverage</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Does the </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> script create any outputs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> If not, leave blank, otherwise provide a path relative to a project root (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">e.g.</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dist,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> lib,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> build,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> coverage</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Does the </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;dev&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> script create any outputs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> If not, leave blank, otherwise provide a path relative to a project root (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">e.g.</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dist,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> lib,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> build,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> coverage</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Does the </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;start&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> script create any outputs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> If not, leave blank, otherwise provide a path relative to a project root (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">e.g.</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dist,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> lib,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> build,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> coverage</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> WARN</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> add-caching</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> The</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">tasksRunnerOptions.default.cacheableOperations</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> property</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> already</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> exists</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">nx.json</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> will</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> be</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> overwritten</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> by</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> your</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> answers</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> WARN</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> add-caching</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> The</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">targetDefaults</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> property</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> already</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> exists</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">nx.json</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> will</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> be</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> overwritten</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> by</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> your</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> answers</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> success</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> add-caching</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Successfully</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> updated</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> task</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> runner</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> configuration</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">nx.json</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">\`</span></span></code></pre></div><p>执行后会生成 <code>nx.json</code>：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">  &quot;tasksRunnerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">    &quot;default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">      &quot;runner&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;nx/tasks-runners/default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">      &quot;options&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">        &quot;cacheableOperations&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">          &quot;build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">          &quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">          &quot;dev&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">          &quot;start&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">  &quot;targetDefaults&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">    &quot;dev&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">      &quot;dependsOn&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;^dev&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">    &quot;build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">      &quot;dependsOn&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;^build&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">    &quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">      &quot;dependsOn&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;^test&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">    &quot;start&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">      &quot;dependsOn&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;^start&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>单独 build <code>header</code>：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --scope=header</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">➜</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  ~</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --scope=header</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> notice</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> cli</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> v6.0.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> notice</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> filter</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> including</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;header&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> info</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> filter</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;header&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> header:build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> v1.22.19</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">warning</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> package.json:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> No</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> license</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> field</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> rimraf</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dist</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">rollup</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --config</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">src/index.tsx</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> →</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dist...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">created</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dist</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 73ms</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Done</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 0.44s.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> —————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  Lerna</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (powered </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">by</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Nx</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)   Successfully ran target build </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> project header (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">749ms</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span></code></pre></div><h2 id="发布" tabindex="-1">发布 <a class="header-anchor" href="#发布" aria-label="Permalink to &quot;发布&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> publish</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --no-private</span></span></code></pre></div><ul><li>确定当前package版本</li><li>检测版本变动并更新<code>package.json</code>版本</li><li>创建一个 package.json 的 commit，tag 这个 commit，并push tag&amp;commit</li><li>publish package 到 NPM</li></ul><h2 id="version" tabindex="-1">Version <a class="header-anchor" href="#version" aria-label="Permalink to &quot;Version&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> version</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --no-private</span></span></code></pre></div><p>执行前确保文件都已经 commit：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">➜</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  ~</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> version</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --no-private</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> notice</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> cli</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> v6.0.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> info</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> current</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> version</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.0.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> info</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Assuming</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> all</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> packages</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> changed</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Select a new version (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">currently</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Use</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> arrow</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> keys</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">❯</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Patch</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (0.0.1)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  Minor</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (0.1.0)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  Major</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (1.0.0)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  Prepatch</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (0.0.1-alpha.0)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  Preminor</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (0.1.0-alpha.0)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  Premajor</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (1.0.0-alpha.0)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  Custom</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Prerelease</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  Custom</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Version</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Note that by passing <code>--no-private</code> we exclude all packages that are marked <code>private</code> in their <code>package.json</code> file.</p></div><p>当然也可以直接指定版本：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> version</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1.0.0</span></span></code></pre></div><hr><ul><li><a href="https://lerna.js.org/docs/getting-started" target="_blank" rel="noreferrer">Lerna Docs</a></li><li><a href="https://nx.dev/" target="_blank" rel="noreferrer">NX Smart, Fast Extensible Build System</a></li><li><a href="https://lerna.js.org/docs/recipes/using-pnpm-with-lerna" target="_blank" rel="noreferrer">Using pnpm with Lerna</a></li></ul>`,46)]))}const o=i(p,[["render",t]]);export{y as __pageData,o as default};
