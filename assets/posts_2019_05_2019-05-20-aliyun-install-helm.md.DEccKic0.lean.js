import{_ as i,a,af as l,o as h}from"./chunks/framework.C87LdZyP.js";const g=JSON.parse('{"title":"Aliyun Install Helm","description":"","frontmatter":{"title":"Aliyun Install Helm","date":"2019-05-20T00:00:00.000Z","tags":["kubernetes","helm","aliyun"],"category":["DevOps"]},"headers":[],"relativePath":"posts/2019/05/2019-05-20-aliyun-install-helm.md","filePath":"posts/2019/05/2019-05-20-aliyun-install-helm.md","lastUpdated":1718173059000}'),e={name:"posts/2019/05/2019-05-20-aliyun-install-helm.md"};function t(n,s,p,k,r,F){return h(),a("div",null,s[0]||(s[0]=[l(`<h2 id="本地安装-helm" tabindex="-1">本地安装 Helm <a class="header-anchor" href="#本地安装-helm" aria-label="Permalink to &quot;本地安装 Helm&quot;">​</a></h2><ul><li><a href="https://github.com/helm/helm/blob/master/docs/install.md?spm=a2c63.p38356.879954.12.1d62b5f9rkeyz2&amp;file=install.md" target="_blank" rel="noreferrer">https://github.com/helm/helm/blob/master/docs/install.md?spm=a2c63.p38356.879954.12.1d62b5f9rkeyz2&amp;file=install.md</a></li></ul><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">brew</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> kubernetes-helm</span></span></code></pre></div><p>配置repo</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> init</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --client-only</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --stable-repo-url</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> https://aliacs-app-catalog.oss-cn-hangzhou.aliyuncs.com/charts/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> repo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> incubator</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> https://aliacs-app-catalog.oss-cn-hangzhou.aliyuncs.com/charts-incubator/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> repo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> update</span></span></code></pre></div><h2 id="查看-version" tabindex="-1">查看 Version <a class="header-anchor" href="#查看-version" aria-label="Permalink to &quot;查看 Version&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> version</span></span></code></pre></div><h2 id="升级tiller" tabindex="-1">升级tiller <a class="header-anchor" href="#升级tiller" aria-label="Permalink to &quot;升级tiller&quot;">​</a></h2><p>根据本地的版本号</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> init</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --tiller-image</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> registry.cn-hangzhou.aliyuncs.com/acs/tiller:v2.11.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --upgrade</span></span></code></pre></div><p>其中镜像地址可使用对应region的vpc域名，比如杭州region的机器就可以替换为registry-vpc.cn-hangzhou.aliyuncs.com/acs/tiller:v2.11.0</p><h2 id="helm-常用命令" tabindex="-1">Helm 常用命令 <a class="header-anchor" href="#helm-常用命令" aria-label="Permalink to &quot;Helm 常用命令&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> list</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # ls</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> repo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> list</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> search</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> search</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 存储库名称</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #如 stable 或 incubator</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> search</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chart名称</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #如 wordpress 或 spark</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> repo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> wordpress-test</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> stable/wordpress</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> upgrade</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> wordpress-test</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> stable/wordpress</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> delete</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> wordpress-test</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> delete</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --purge</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> wordpress-test</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 本地文件安装</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> rabbitmq</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> public-service</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> stable/rabbitmq-ha/values.yaml</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> stable/rabbitmq-ha</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> upgrade</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> rabbitmq</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  --namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> public-service</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> stable/rabbitmq-ha/values.yaml</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> stable/rabbitmq-ha</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> search</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> search</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mysql</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> inspect</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> stable/mysql</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> inspect</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chart</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> stable/mysql</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> inspect</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> values</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> stable/mysql</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> config.yaml</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mysql</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> stable/mysql</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> values</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mysql</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> rollback</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> delete</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mysql</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> del</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --purge</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mysql</span></span></code></pre></div><p>可以在 <a href="https://kubeapps.com/" target="_blank" rel="noreferrer">https://kubeapps.com/</a> 上查找第三方高质量的Chart。</p><hr><ul><li><a href="https://www.alibabacloud.com/help/zh/doc-detail/87014.html?spm=a2c5t.10695662.1996646101.searchclickresult.228316b17uGQ6O" target="_blank" rel="noreferrer">Helm 手动升级</a></li><li><a href="https://www.alibabacloud.com/help/zh/doc-detail/85935.htm" target="_blank" rel="noreferrer">https://www.alibabacloud.com/help/zh/doc-detail/85935.htm</a></li><li><a href="https://www.alibabacloud.com/help/zh/doc-detail/86511.html?spm=a2c5t.11065259.1996646101.searchclickresult.6ba37e1cw0AnZ3" target="_blank" rel="noreferrer">利用 Helm 简化应用部署</a></li><li><a href="https://whmzsu.github.io/helm-doc-zh-cn/quickstart/using_helm-zh_cn.html" target="_blank" rel="noreferrer">Helm 使用</a></li></ul>`,17)]))}const c=i(e,[["render",t]]);export{g as __pageData,c as default};
