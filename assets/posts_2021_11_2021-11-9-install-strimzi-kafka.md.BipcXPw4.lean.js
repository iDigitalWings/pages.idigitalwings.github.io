import{_ as i,a,af as n,o as t}from"./chunks/framework.C87LdZyP.js";const c=JSON.parse('{"title":"Install Strimzi Kafka on Kubernetes","description":"","frontmatter":{"title":"Install Strimzi Kafka on Kubernetes","date":"2021-11-09T00:00:00.000Z","tags":["kafka","strimzi"],"category":["运维"]},"headers":[],"relativePath":"posts/2021/11/2021-11-9-install-strimzi-kafka.md","filePath":"posts/2021/11/2021-11-9-install-strimzi-kafka.md","lastUpdated":1718173059000}'),l={name:"posts/2021/11/2021-11-9-install-strimzi-kafka.md"};function e(p,s,h,k,r,d){return t(),a("div",null,s[0]||(s[0]=[n(`<div class="tip custom-block"><p class="custom-block-title">Strimzi.</p><p><a href="https://strimzi.io/" target="_blank" rel="noreferrer">Strimzi</a> provides a way to run an Apache Kafka cluster on Kubernetes in various deployment configurations.</p></div><h3 id="下载" tabindex="-1">下载 <a class="header-anchor" href="#下载" aria-label="Permalink to &quot;下载&quot;">​</a></h3><p>从 <a href="https://github.com/strimzi/strimzi-kafka-operator/releases" target="_blank" rel="noreferrer">GitHub</a> 下载 <code>strimzi-x.y.z.zip</code>。</p><h3 id="创建命名空间-kafka" tabindex="-1">创建命名空间 kafka <a class="header-anchor" href="#创建命名空间-kafka" aria-label="Permalink to &quot;创建命名空间 kafka&quot;">​</a></h3><p>部署 <strong>Strimzi Kafka Cluster Operator</strong> 的命名控件</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ns</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> kafka</span></span></code></pre></div><h3 id="修改默认命名控件" tabindex="-1">修改默认命名控件 <a class="header-anchor" href="#修改默认命名控件" aria-label="Permalink to &quot;修改默认命名控件&quot;">​</a></h3><p>解压刚才下载的安装包，替换命名空间： Linux:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;s/namespace: .*/namespace: kafka/&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install/cluster-operator/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">RoleBinding</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.yaml</span></span></code></pre></div><p>Mac:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;s/namespace: .*/namespace: kafka/&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install/cluster-operator/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">RoleBinding</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.yaml</span></span></code></pre></div><h3 id="创建命名空间-my-kafka-project" tabindex="-1">创建命名空间 my-kafka-project <a class="header-anchor" href="#创建命名空间-my-kafka-project" aria-label="Permalink to &quot;创建命名空间 my-kafka-project&quot;">​</a></h3><p>部署 <code>kafka cluster</code> 的命名空间</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ns</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> my-kafka-project</span></span></code></pre></div><h3 id="修改默认命名空间" tabindex="-1">修改默认命名空间 <a class="header-anchor" href="#修改默认命名空间" aria-label="Permalink to &quot;修改默认命名空间&quot;">​</a></h3><p>编辑 <code>install/cluster-operator/060-Deployment-strimzi-cluster-operator.yaml</code> 修改 <code>STRIMZI_NAMESPACE</code> 为 <code>my-kafka-project</code>。</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># ...</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">env</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">STRIMZI_NAMESPACE</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  value</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">my-kafka-project</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># ...</span></span></code></pre></div><h3 id="部署-crds" tabindex="-1">部署 CRDs <a class="header-anchor" href="#部署-crds" aria-label="Permalink to &quot;部署 CRDs&quot;">​</a></h3><div class="tip custom-block"><p class="custom-block-title">修改镜像</p><p>修改 quay.io 为 <code>quay.mirrors.ustc.edu.cn</code>：</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      containers</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">          - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">strimzi-cluster-operator</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            image</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">quay.mirrors.ustc.edu.cn/strimzi/operator:0.26.0</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            ports</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">                - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">containerPort</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8080</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">                  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">http</span></span></code></pre></div></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install/cluster-operator/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> kafka</span></span></code></pre></div><h3 id="赋权-cluster-operator-可-watch-my-kafka-project" tabindex="-1">赋权 Cluster Operator 可 watch <code>my-kafka-project</code> <a class="header-anchor" href="#赋权-cluster-operator-可-watch-my-kafka-project" aria-label="Permalink to &quot;赋权 Cluster Operator 可 watch \`my-kafka-project\`&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install/cluster-operator/020-RoleBinding-strimzi-cluster-operator.yaml</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> my-kafka-project</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install/cluster-operator/031-RoleBinding-strimzi-cluster-operator-entity-operator-delegation.yaml</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> my-kafka-project</span></span></code></pre></div><h3 id="创建-cluster" tabindex="-1">创建 cluster <a class="header-anchor" href="#创建-cluster" aria-label="Permalink to &quot;创建 cluster&quot;">​</a></h3><p>此处使用 StorageClass: <code>alicloud-disk-ssd</code>。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#ADBAC7;"> EOF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> my-kafka-project</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">apiVersion: kafka.strimzi.io/v1beta2</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">kind: Kafka</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">metadata:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  name: my-cluster</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">spec:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  kafka:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    replicas: 1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    listeners:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      - name: plain</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        port: 9092</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        type: internal</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        tls: false</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      - name: tls</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        port: 9093</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        type: internal</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        tls: true</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        authentication:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">          type: tls</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      - name: external</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        port: 9094</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        type: nodeport</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        tls: false</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    storage:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      type: jbod</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      volumes:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      - id: 0</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        type: persistent-claim</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        size: 100Gi</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        deleteClaim: false</span></span>
<span class="line highlighted"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        class: alicloud-disk-ssd</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    config:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      offsets.topic.replication.factor: 1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      transaction.state.log.replication.factor: 1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      transaction.state.log.min.isr: 1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  zookeeper:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    replicas: 1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    storage:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      type: persistent-claim</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      size: 100Gi</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      deleteClaim: false</span></span>
<span class="line highlighted"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      class: alicloud-disk-ssd</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  entityOperator:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    topicOperator: {}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    userOperator: {}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#ADBAC7;">EOF</span></span></code></pre></div><h3 id="等待集群部署完成" tabindex="-1">等待集群部署完成 <a class="header-anchor" href="#等待集群部署完成" aria-label="Permalink to &quot;等待集群部署完成&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> wait</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> kafka/my-cluster</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --for=condition=Ready</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --timeout=300s</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> my-kafka-project</span></span></code></pre></div><h3 id="创建-topic" tabindex="-1">创建 Topic <a class="header-anchor" href="#创建-topic" aria-label="Permalink to &quot;创建 Topic&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#ADBAC7;"> EOF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> my-kafka-project</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">apiVersion: kafka.strimzi.io/v1beta2</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">kind: KafkaTopic</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">metadata:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  name: my-topic</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  labels:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    strimzi.io/cluster: &quot;my-cluster&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">spec:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  partitions: 3</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  replicas: 1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#ADBAC7;">EOF</span></span></code></pre></div><h3 id="测试读写消息" tabindex="-1">测试读写消息 <a class="header-anchor" href="#测试读写消息" aria-label="Permalink to &quot;测试读写消息&quot;">​</a></h3><p>启动 Producer 输入消息：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> my-kafka-project</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> kafka-producer</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -ti</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --image=quay.mirrors.ustc.edu.cn/strimzi/kafka:0.26.0-kafka-3.0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --rm=true</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --restart=Never</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/kafka-console-producer.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --broker-list</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> my-cluster-kafka-bootstrap:9092</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --topic</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> my-topic</span></span></code></pre></div><p>启动 Consumer 读取消息：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> my-kafka-project</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> kafka-consumer</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -ti</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --image=quay.mirrors.ustc.edu.cn/strimzi/kafka:0.26.0-kafka-3.0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --rm=true</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --restart=Never</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/kafka-console-consumer.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --bootstrap-server</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> my-cluster-kafka-bootstrap:9092</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --topic</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> my-topic</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --from-beginning</span></span></code></pre></div><h3 id="其它配置" tabindex="-1">其它配置 <a class="header-anchor" href="#其它配置" aria-label="Permalink to &quot;其它配置&quot;">​</a></h3><ul><li><a href="https://strimzi.io/docs/operators/latest/deploying.html#setup-external-clients-str" target="_blank" rel="noreferrer">调整外网的访问方式</a></li><li></li></ul>`,37)]))}const o=i(l,[["render",e]]);export{c as __pageData,o as default};
